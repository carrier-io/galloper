<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Carrier | UI Performance Audit</title>
    <link rel="icon" href="https://getcarrier.io/favicon-32x32.png" sizes="32x32" type="image/png"/>
    <style>
        html {
            -ms-text-size-adjust: 100%;
            -webkit-text-size-adjust: 100%;
            font-size: 100%
        }

        body {
            font-size: 1em;
            line-height: 1.6;
            font-weight: 400;
            font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Helvetica, Arial, sans-serif;
        }


        .green {color: #3D9C06;}

        .yellow {color: #DEBC14;}

        .red {color: #A03232;}

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin-bottom: 1rem;
            font-weight: 300
        }

        h1 {
            font-size: 1.5rem;
        }

        h2 {
            margin-top: 1.3rem;
            font-size: 1.3rem;
        }

        h3 {
            font-size: 1.1rem;
        }

        h4 {
            font-size: 1rem;
        }

        h5 {
            font-size: 0.8rem;
        }

        h6 {
            font-size: 0.5rem;
        }

        p {
            margin-top: 0
        }

        a {
            color: #5712b0
        }

        a:hover {
            color: #5712b0
        }

        .frameFooter {
            height: 120;
            border-right: solid;
            border-right-color: blueviolet;
            border-right-width: 1.5px;
        }

        #frames_container {
            display: inline-flex;
        }

        #timeLine {
            width: 100%;
            height: 350px;
        }

        #timeLine2 {
            width: 100%;
            height: 500px;
        }

        .frameImg {
            height: 97;
            width: 99%;
            cursor: pointer;
            transition: 0.3s;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            padding-top: 100px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: #393a329e;
        }

        .contentImg {
            margin: auto;
            display: block;
            width: 90%;
            max-width: 1400px;
        }

        .contentImg,
        .caption {
            -webkit-animation-name: zoom;
            -webkit-animation-duration: 0.6s;
            animation-name: zoom;
            animation-duration: 0.6s;
            -webkit-box-shadow: 0px 0px 67px 20px rgba(43,34,43,1);
            -moz-box-shadow: 0px 0px 67px 20px rgba(43,34,43,1);
            box-shadow: 0px 0px 67px 20px rgba(43,34,43,1);
            border-radius: 15px;
            -moz-border-radius: 15px;
            -webkit-border-radius: 15px;
            border: 0px solid #000000;
        }

        .content {
            max-width: 1200px;
            margin: auto;
        }

        @keyframes zoom {
            from {
                transform: scale(0)
            }

            to {
                transform: scale(1)
            }
        }

        @media only screen and (max-width: 700px; ) {
            .contentImg {
                width: 100%;
            }
        }

        .custom-tooltip{
            display: table;
        }
        .custom-tooltip-cell1{
            font: bold;
            display: table-cell;
        }
        .custom-tooltip-row{
            display: table-row;
        }
        .custom-tooltip-cell2{
            display: table-cell;
        }

        .caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
        }

        #resPopUp {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            bottom: 0%;
            width: 100%;
            padding-top: 4%;
            height: 60%;
            overflow: auto;
            background-color: #393a329e;
        }

        #resPopUpBody {
            padding: 40;
            height: 86%;
            width: 90%;
            margin: auto;
            background: white;
            -webkit-box-shadow: 0px 0px 67px 20px rgba(43,34,43,1);
            -moz-box-shadow: 0px 0px 67px 20px rgba(43,34,43,1);
            box-shadow: 0px 0px 67px 20px rgba(43,34,43,1);
            border-radius: 15px;
            -moz-border-radius: 15px;
            -webkit-border-radius: 15px;
            border: 0px solid #000000;
        }

        #closePopUp {
            position: absolute;
            top: 0px;
            right: 15px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

        #closePopUp:hover,
        #closePopUp:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        .divFrame {
            display: flex;
            width: 100%;
            margin: auto;
        }

        .tableDiv {
            display: table;
        }
        .tableRow {
            display: table-row;
        }
        .tableCell {
            display: table-cell;
        }
        li.tableCell.cellName {
            width: 100px;
            text-align: left;
            font-weight: 600;
        }
        li.tableCell.cellValue {
            text-align: left;
            word-break: break-all;
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        main,
        menu,
        nav,
        section,
        summary {
            display: block
        }

        audio,
        canvas,
        progress,
        video {
            display: inline-block
        }

        audio:not([controls]) {
            display: none;
            height: 0
        }

        progress {
            vertical-align: baseline
        }

        [hidden],
        template {
            display: none
        }

        a {
            background-color: transparent;
            -webkit-text-decoration-skip: objects
        }

        a:active,
        a:hover {
            outline-width: 0
        }

        abbr[title] {
            border-bottom: none;
            text-decoration: underline;
            text-decoration: underline dotted
        }

        b,
        strong {
            font-weight: inherit
        }

        b,
        strong {
            font-weight: bolder
        }

        dfn {
            font-style: italic
        }

        h1 {
            font-size: 2em;
            margin: .67em 0
        }

        mark {
            background-color: #ff0;
            color: #000
        }

        small {
            font-size: 80%
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        img {
            border-style: none
        }

        svg:not(:root) {
            overflow: hidden
        }

        code,
        kbd,
        pre,
        samp {
            font-family: monospace, monospace;
            font-size: 1em
        }

        figure {
            margin: 1em 40px
        }

        hr {
            box-sizing: content-box;
            height: 0;
            overflow: visible
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font: inherit;
            margin: 0
        }

        optgroup {
            font-weight: 700
        }

        button,
        input {
            overflow: visible
        }

        button,
        select {
            text-transform: none
        }

        [type=reset],
        [type=submit],
        button,
        html [type=button] {
            -webkit-appearance: button
        }

        [type=button]::-moz-focus-inner,
        [type=reset]::-moz-focus-inner,
        [type=submit]::-moz-focus-inner,
        button::-moz-focus-inner {
            border-style: none;
            padding: 0
        }

        [type=button]:-moz-focusring,
        [type=reset]:-moz-focusring,
        [type=submit]:-moz-focusring,
        button:-moz-focusring {
            outline: 1px dotted ButtonText
        }

        fieldset {
            border: 1px solid silver;
            margin: 0 2px;
            padding: .35em .625em .75em
        }

        legend {
            box-sizing: border-box;
            color: inherit;
            display: table;
            max-width: 100%;
            padding: 0;
            white-space: normal
        }

        textarea {
            overflow: auto
        }

        [type=checkbox],
        [type=radio] {
            box-sizing: border-box;
            padding: 0
        }

        [type=number]::-webkit-inner-spin-button,
        [type=number]::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        [type=search]::-webkit-search-cancel-button,
        [type=search]::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-input-placeholder {
            color: inherit;
            opacity: .54
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        *,
        :after,
        :before {
            box-sizing: border-box
        }

        ol,
        ul {
            margin-bottom: 2.5rem
        }

        ul {
            margin-top: 0;
            padding-left: 0;
            list-style: circle inside
        }

        ul ol,
        ul ul {
            margin: 1.5rem 0 1.5rem 3rem;
            font-size: .9rem
        }

        ol {
            margin-top: 0;
            padding-left: 0;
            list-style: decimal inside
        }

        ol ol,
        ol ul {
            margin: 1.5rem 0 1.5rem 3rem;
            font-size: .9rem
        }

        li {
            margin-bottom: 0
        }

        figure {
            margin-bottom: 2.5rem
        }

        footer {
            text-align: center
        }

        hr {
            margin-top: 3rem;
            margin-bottom: 3.5rem;
            border-width: 0;
            border-top: 1px solid #e1e1e1
        }

        .container:after,
        .row:after {
            content: "";
            display: table;
            clear: both
        }

        .container {
            position: relative;
            width: 100%;
            max-width: 1140px;
            margin: 0 auto;
            padding: 0 20px;
            box-sizing: border-box
        }

        .column,
        .columns {
            width: 100%;
            float: left;
            box-sizing: border-box
        }

        @media (min-width:400px) {
            .container {
                width: 85%;
                padding: 0
            }
        }

        @media (min-width:550px) {
            .container {
                width: 80%
            }

            .column,
            .columns {
                margin-left: 4%
            }

            .column:first-child,
            .columns:first-child {
                margin-left: 0
            }

            .one.column,
            .one.columns {
                width: 4.66666666667%
            }

            .two.columns {
                width: 13.3333333333%
            }

            .three.columns {
                width: 22%
            }

            .four.columns {
                width: 30.6666666667%
            }

            .five.columns {
                width: 39.3333333333%
            }

            .six.columns {
                width: 48%
            }

            .seven.columns {
                width: 56.6666666667%
            }

            .eight.columns {
                width: 65.3333333333%
            }

            .nine.columns {
                width: 74%
            }

            .ten.columns {
                width: 82.6666666667%
            }

            .eleven.columns {
                width: 91.3333333333%
            }

            .twelve.columns {
                width: 100%;
                margin-left: 0;
            }

            .one-third.column {
                width: 30.6666666667%
            }

            .two-thirds.column {
                width: 65.3333333333%
            }

            .one-half.column {
                width: 48%
            }

            .offset-by-one.column,
            .offset-by-one.columns {
                margin-left: 8.66666666667%
            }

            .offset-by-two.column,
            .offset-by-two.columns {
                margin-left: 17.3333333333%
            }

            .offset-by-three.column,
            .offset-by-three.columns {
                margin-left: 26%
            }

            .offset-by-four.column,
            .offset-by-four.columns {
                margin-left: 34.6666666667%
            }

            .offset-by-five.column,
            .offset-by-five.columns {
                margin-left: 43.3333333333%
            }

            .offset-by-six.column,
            .offset-by-six.columns {
                margin-left: 52%
            }

            .offset-by-seven.column,
            .offset-by-seven.columns {
                margin-left: 60.6666666667%
            }

            .offset-by-eight.column,
            .offset-by-eight.columns {
                margin-left: 69.3333333333%
            }

            .offset-by-nine.column,
            .offset-by-nine.columns {
                margin-left: 78%
            }

            .offset-by-ten.column,
            .offset-by-ten.columns {
                margin-left: 86.6666666667%
            }

            .offset-by-eleven.column,
            .offset-by-eleven.columns {
                margin-left: 95.3333333333%
            }

            .offset-by-one-third.column,
            .offset-by-one-third.columns {
                margin-left: 34.6666666667%
            }

            .offset-by-two-thirds.column,
            .offset-by-two-thirds.columns {
                margin-left: 69.3333333333%
            }

            .offset-by-one-half.column,
            .offset-by-one-half.columns {
                margin-left: 52%
            }
        }

        @media (min-width:1550px) {
            .container {
                max-width: 1400px;
                font-size: 1.2em
            }
        }

        @media (min-width:1900px) {
            .container {
                max-width: 1800px;
                font-size: 1.4em
            }
        }

        table {
            width: 100%;
            margin-bottom: 2.5rem;
            border-collapse: separate;
            border-spacing: 1px;
            background-color: #e1e1e1
        }

        td,
        th {
            padding: 4px 1rem;
            vertical-align: top;
            text-align: left
        }

        td:first-child,
        th:first-child {
            padding-left: 1rem
        }

        td:last-child,
        th:last-child {
            padding-right: 1rem
        }

        tr:nth-child(odd) {
            background: #fafafa
        }

        tr:nth-child(even) {
            background: #fff
        }

        tr.odd {
            background: #fafafa
        }

        tr.even {
            background: #fff
        }

        th {
            background: #f1fbff
        }

        td.number,
        th.number {
            text-align: center
        }

        td.right {
            text-align: right
        }

        td.url {
            overflow-wrap: break-word;
            word-wrap: break-word;
            -webkit-hyphens: auto;
            -ms-hyphens: auto;
            -moz-hyphens: auto;
            hyphens: auto;
            word-break: break-all
        }

        td.assetsurl {
            max-width: 400px
        }

        td.pagesurl {
            max-width: 350px
        }

        td.offendingurl {
            max-width: 900px
        }

        td.break {
            word-break: break-all
        }

        td.extraheader {
            font-weight: 700;
            background: #f5f5f5
        }

        @media only screen and (max-width:800px) {

            .responsive table,
            .responsive tbody,
            .responsive td,
            .responsive th,
            .responsive thead,
            .responsive tr {
                display: block
            }

            .responsive tr.u-hideable {
                display: none
            }

            .responsive thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px
            }

            .responsive tr {
                border: 2px solid #e1e1e1
            }

            .responsive td {
                border: none;
                border-bottom: 1px solid #e1e1e1;
                position: relative;
                padding-left: 50%;
                white-space: normal;
                text-align: left;
                max-width: none
            }

            .responsive td:before {
                position: absolute;
                top: 6px;
                left: 6px;
                width: 30%;
                padding-right: 10px;
                white-space: nowrap;
                text-align: left;
                font-weight: 700
            }

            .responsive td:before {
                content: attr(data-title)
            }

            .responsive td.url.offendingurl {
                word-break: break-all;
                padding-left: 2px
            }

            .hidden-small {
                display: none
            }
        }

        blockquote,
        dl,
        p,
        pre {
            margin-bottom: 2.5rem
        }

        code {
            padding: .2rem .5rem;
            margin: 0 .2rem;
            font-size: .9rem;
            white-space: nowrap;
            background: #fafafa;
            border: 1px solid #e1e1e1;
            border-radius: 4px
        }

        pre>code {
            display: block;
            padding: 1rem 1.5rem;
            white-space: pre
        }

        .u-full-width {
            width: 100%
        }

        .u-max-full-width {
            max-width: 100%
        }

        .u-pull-right {
            float: right
        }

        .u-pull-left {
            float: left
        }

        .u-cf {
            content: "";
            display: table;
            clear: both
        }

        .u-hideable {
            display: none
        }

        .button {
            display: inline-block;
            height: 38px;
            padding: 0 30px;
            margin-bottom: 1rem;
            color: #222;
            text-align: center;
            font-size: 80%;
            font-weight: 600;
            line-height: 38px;
            letter-spacing: .1rem;
            text-transform: uppercase;
            text-decoration: none;
            white-space: nowrap;
            background-color: transparent;
            border-radius: 4px;
            border: 1px solid #e1e1e1;
            cursor: pointer
        }

        .button:active,
        .button:focus,
        .button:hover {
            color: #222;
            border-color: #aeaeae;
            outline: 0
        }

        .button--primary {
            color: #fff;
            background-color: #5712b0;
            border-color: #5712b0
        }

        .button--primary:active,
        .button--primary:focus,
        .button--primary:hover {
            color: #fff;
            background-color: #5712b0;
            border-color: #5712b0
        }

        .button-download {
            color: #fff;
            background-color: #ec971f;
            border-color: #eb9316;
            padding: 0 10px;
            margin-right: 1rem
        }

        .button-download:active,
        .button-download:focus,
        .button-download:hover {
            color: #fff;
            background-color: #e38d13;
            border-color: #da8813
        }

        .navgrid {
            width: 100%;
            min-width: 0;
            margin-left: 0;
            margin-right: 0;
            padding-left: 0;
            padding-right: 10px
        }

        .nav {
            background: #5712b0
        }

        .nav ul {
            list-style: none;
            text-align: center;
            padding: 0;
            margin: 0;
            background-color: #5712b0
        }

        .nav li {
            line-height: 40px;
            height: 40px;
            border-bottom: none;
            margin-bottom: 0
        }

        .nav a {
            text-decoration: none;
            color: #fff;
            display: block
        }

        .nav a:hover {
            background-color: #5712b0
        }

        .nav a.active {
            background-color: #5712b0;
            color: #fff;
            cursor: default
        }

        .logo {
            text-align: center;
            background-color: #5712b0
        }

        .navbar-brand {
            padding: 0;
            font-size: 18px;
            max-width: 250px
        }

        @media screen and (min-width:820px) {
            body {
                padding-top: 50px
            }

            .navgrid {
                width: 100%;
                max-width: 1140px;
                min-width: 755px;
                margin: 0 auto;
                overflow: hidden
            }

            .nav {
                height: 50px;
                width: 100%;
                z-index: 1000;
                position: fixed;
                top: 0
            }

            .navbar-brand {
                padding: 0;
                font-size: 18px;
                float: left;
                max-width: 250px
            }

            .nav {
                z-index: 10;
                top: 0;
                background-color: #0095d2
            }

            .nav a {
                padding-left: 20px;
                padding-right: 20px
            }

            .nav li {
                border-bottom: none;
                height: 50px;
                line-height: 50px;
                float: left;
                display: inline-block;
                margin-right: 0
            }

            .nav a {
                text-decoration: none;
                color: #fff;
                display: block
            }

            .nav ul {
                list-style: none;
                text-align: center;
                padding: 0;
                margin: 0;
                background-color: #0095d2
            }

            :target:before {
                content: "";
                display: block;
                height: 50px;
                margin: -50px 0 0
            }
        }

        @media (min-width:1550px) {
            .nav li {
                font-size: 1.2em
            }
        }

        @media (min-width:1900px) {
            .nav li {
                font-size: 1.4em
            }
        }

        table[data-sortable] th[data-sorted=true] {
            color: #3a87ad;
            background: #d9edf7;
            border-bottom-color: #bce8f1
        }

        table[data-sortable] th:not([data-sortable=false]) {
            cursor: pointer;
            color: #222;
            text-decoration: underline
        }

        .summarybox {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 4px
        }

        .summarybox.ok {
            color: #468847;
            background-color: #dff0d8;
            border-color: #d6e9c6
        }

        .summarybox.warning {
            color: #c09853;
            background-color: #fcf8e3;
            border-color: #fbeed5
        }

        .summarybox.error {
            color: #b94a48;
            background-color: #f2dede;
            border-color: #eed3d7
        }

        .summarybox.info {
            background-color: #d9edf7;
            border-color: #bce8f1;
            color: #3a87ad
        }

        a.summaries {
            text-decoration: none
        }

        .summarynumber {
            font-size: 2rem;
            line-height: 1;
            font-weight: 700
        }

        .summarysmall {
            font-size: 1rem;
            line-height: 1
        }

        .label {
            display: inline;
            padding: .2em .6em .3em;
            font-size: 75%;
            font-weight: 700;
            line-height: 1;
            color: #fff;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: .25em
        }

        .normal {
            font-size: 100%
        }

        .ok {
            background-color: #468847
        }

        .warning {
            background-color: #f0ad4e
        }

        .error {
            background-color: #d9534f
        }

        .info {
            background-color: #0095d2
        }

        ul.menu {
            list-style: none;
            font-size: 125%;
            text-transform: uppercase
        }

        .errors {
            margin-bottom: 1.333em;
            background: #ffb6c1;
            padding-left: 1em
        }

        .subtableheader {
            background: #ffe3eb
        }

        .large {
            font-size: 1.333rem;
            line-height: 1.8rem
        }

        .hidden-small {
            display: inline
        }

        .url {
            overflow-wrap: break-word;
            word-wrap: break-word;
            -webkit-hyphens: auto;
            -ms-hyphens: auto;
            -moz-hyphens: auto;
            hyphens: auto
        }


        /*! github.com/micmro/PerfCascade Version:2.6.1 (27/05/2019) */

        .water-fall-chart {
            width: 100%;
            overflow: visible;
            font-size: 12px;
            line-height: 1em
        }

        .water-fall-chart * {
            box-sizing: border-box
        }

        .water-fall-chart button {
            cursor: pointer
        }

        .water-fall-holder {
            fill: #ccc
        }

        .water-fall-chart .left-fixed-holder {
            overflow: visible
        }

        .water-fall-chart .marker-holder {
            width: 100%
        }

        .water-fall-chart .line-label-holder {
            cursor: pointer
        }

        .water-fall-chart .line-holder {
            stroke-width: 1;
            stroke: #ccc;
            stroke-opacity: .5;
            transition: all 60ms
        }

        .water-fall-chart .line-holder .line-mark {
            fill: #69009e;
            opacity: .01;
            stroke-width: 0;
            transition: all 60ms
        }

        .water-fall-chart .line-holder.active {
            stroke: #69009e;
            stroke-width: 2;
            stroke-opacity: 1
        }

        .water-fall-chart .line-holder.active .line-mark {
            opacity: .4
        }

        .water-fall-chart .type-onload .line-holder {
            stroke: #c0c0ff
        }

        .water-fall-chart .type-oncontentload .line-holder {
            stroke: #d888df
        }

        .water-fall-chart .labels {
            width: 100%
        }

        .water-fall-chart .labels .inner-label {
            pointer-events: none
        }

        .water-fall-chart .time-block.active {
            opacity: .8
        }

        .water-fall-chart .line-end,
        .water-fall-chart .line-start {
            display: none;
            stroke-width: 1;
            stroke-opacity: .5;
            stroke: #000
        }

        .water-fall-chart .line-end.active,
        .water-fall-chart .line-start.active {
            display: block
        }

        .left-fixed-holder .label-full-bg {
            fill: #fff;
            opacity: .9
        }

        .time-scale line {
            stroke: #0cc;
            stroke-width: 1
        }

        .time-scale line.sub-second-line {
            stroke: #ccc;
            opacity: .75;
            stroke-width: .5
        }

        .time-scale text {
            font-weight: 700
        }

        .row-item {
            cursor: pointer
        }

        .row-item .even {
            fill: #ccc;
            opacity: .05
        }

        .row-item .odd {
            fill: #000;
            opacity: .05
        }

        .row-item:hover .even,
        .row-item:hover .odd {
            fill: #000;
            opacity: .1
        }

        .row-item:focus {
            outline: solid 1.5px #aaa;
            outline-offset: -1.5px
        }

        .row-item:focus .even,
        .row-item:focus .odd {
            fill: #000;
            opacity: .2
        }

        .row-item .rect-holder text {
            fill: #aaa
        }

        .row-item.status5xx .even {
            fill: #f66
        }

        .row-item.status5xx .odd {
            fill: red
        }

        .row-item.status4xx .even {
            fill: #c33
        }

        .row-item.status4xx .odd {
            fill: #c00
        }

        .row-item.status3xx .even {
            fill: #ff6
        }

        .row-item.status3xx .odd {
            fill: #ff0
        }

        .row-item.status3xx .even,
        .row-item.status3xx .odd,
        .row-item.status4xx .even,
        .row-item.status4xx .odd,
        .row-item.status5xx .even,
        .row-item.status5xx .odd {
            opacity: .3
        }

        .row-item.status3xx:hover .even,
        .row-item.status3xx:hover .odd,
        .row-item.status4xx:hover .even,
        .row-item.status4xx:hover .odd,
        .row-item.status5xx:hover .even,
        .row-item.status5xx:hover .odd {
            opacity: .5
        }

        .tooltip-holder {
            overflow: visible
        }

        .tooltip * {
            padding: 0;
            margin: 0
        }

        .tooltip html {
            font-size: 10px;
            line-height: 1.2em
        }

        .tooltip body {
            position: relative
        }

        .tooltip-payload {
            position: absolute;
            top: 0;
            left: 0;
            padding: .25em;
            font-size: 10px;
            display: inline-block;
            background: rgba(255, 255, 255, .9);
            border: solid 1px #f0f0f0;
            word-break: break-all;
            overflow-wrap: break-word;
            transition: opacity .3s
        }

        .tooltip-payload.no-anim {
            transition: none
        }

        .row-item,
        .time-scale line,
        .time-scale text,
        .water-fall-chart .line-holder line,
        .water-fall-chart .line-label-holder {
            transition: transform 60ms
        }

        .water-fall-chart.closing {
            transition-delay: 60ms
        }

        .labels {
            overflow: hidden
        }

        .block-css {
            fill: #a6d18f
        }

        .block-html,
        .block-iframe,
        .block-internal,
        .block-svg {
            fill: #82a8de
        }

        .block-image,
        .block-img {
            fill: #b394cf
        }

        .block-javascript,
        .block-js,
        .block-script {
            fill: #e0b483
        }

        .block-link {
            fill: #89afe6
        }

        .block-flash,
        .block-swf {
            fill: #42aab1
        }

        .block-font {
            fill: #e15d4e
        }

        .block-ajax,
        .block-xmlhttprequest {
            fill: red
        }

        .block-other,
        .block-plain {
            fill: #b3b3b3
        }

        .block-blocked {
            fill: #aaa
        }

        .block-dns {
            fill: #159588
        }

        .block-connect {
            fill: #fd9727
        }

        .block-ssl {
            fill: #c141cd
        }

        .block-send {
            fill: #b0bec5
        }

        .block-wait {
            fill: #1ec659
        }

        .block-receive {
            fill: #1eaaf1
        }

        .block-undefined {
            fill: #0f0
        }

        .info-overlay-bg {
            fill: #fff;
            stroke: #cdcdcd
        }

        .info-overlay-close-btn {
            fill: rgba(205, 205, 205, .8);
            transform: translate(-23px, -23px);
            cursor: pointer
        }

        .info-overlay-close-btn text {
            fill: #111;
            pointer-events: none
        }

        .info-overlay-close-btn:focus {
            border: solid 1px #36c
        }

        .info-overlay-holder .connect {
            border-right: solid 5px #fd9727;
            padding-right: 5px
        }

        .info-overlay-holder .blocked {
            border-right: solid 5px #aaa;
            padding-right: 5px
        }

        .info-overlay-holder .ssltls {
            border-right: solid 5px #c141cd;
            padding-right: 5px
        }

        .info-overlay-holder .send {
            border-right: solid 5px #b0bec5;
            padding-right: 5px
        }

        .info-overlay-holder .wait {
            border-right: solid 5px #1ec659;
            padding-right: 5px
        }

        .info-overlay-holder .receive {
            border-right: solid 5px #1eaaf1;
            padding-right: 5px
        }

        .info-overlay-holder .dns {
            border-right: solid 5px #159588;
            padding-right: 5px
        }

        .type-css {
            background: #406b29
        }

        .type-html,
        .type-iframe,
        .type-internal,
        .type-svg {
            background: #1c4278
        }

        .type-image,
        .type-img {
            background: #4d2e69
        }

        .type-javascript,
        .type-js,
        .type-script {
            background: #7a4e1d
        }

        .type-link {
            background: #89afe6
        }

        .type-flash,
        .type-swf {
            background: #234980
        }

        .type-font {
            background: #ae2a1b
        }

        .type-ajax,
        .type-xmlhttprequest {
            background: #c00
        }

        .type-other,
        .type-plain {
            background: grey
        }

        .info-overlay-holder * {
            padding: 0;
            margin: 0;
            font-size: 12px
        }

        .info-overlay-holder body {
            position: relative;
            height: 450px;
            clear: both;
            padding: 0;
            margin: 0;
            width: 100%;
            background: #fff;
            color: #666
        }

        .info-overlay-holder body .wrapper {
            height: 450px;
            width: 100%;
            overflow: scroll
        }

        .info-overlay-holder header {
            position: relative;
            box-shadow: 0 0 2px 2px rgba(0, 0, 0, .25)
        }

        .info-overlay-holder header,
        .info-overlay-holder header a,
        .info-overlay-holder header button {
            color: #fff;
            text-decoration: none
        }

        .info-overlay-holder header a:focus,
        .info-overlay-holder header a:hover {
            text-decoration: underline
        }

        .info-overlay-holder .requestID {
            font-weight: 700
        }

        .info-overlay-holder h3,
        .info-overlay-holder h3 a {
            font-size: 1.1em;
            padding: 1em;
            margin: 0;
            font-weight: 400;
            overflow-wrap: break-word
        }

        .info-overlay-holder h3 strong {
            font-size: 1.1em
        }

        .info-overlay-holder .tab-nav ul {
            margin: 0;
            padding: 0
        }

        .info-overlay-holder .tab-nav li {
            margin: 0;
            padding: 0;
            display: inline-block
        }

        .info-overlay-holder button {
            background: 0 0;
            outline: 0;
            border: 0;
            border-bottom: solid 2px transparent;
            padding: .5em 1em;
            margin: 0 .25em
        }

        .info-overlay-holder li:first-child button {
            margin-left: 1em
        }

        .info-overlay-holder button.active:focus,
        .info-overlay-holder button:focus,
        .info-overlay-holder button:hover {
            border-color: rgba(255, 255, 255, .6)
        }

        .info-overlay-holder button.active {
            border-color: #fff;
            cursor: default
        }

        .info-overlay-holder button.active:focus {
            border-color: rgba(255, 255, 255, .8)
        }

        .info-overlay-holder dt {
            float: left;
            clear: both;
            margin-top: .5em;
            width: 25%;
            text-align: right;
            font-weight: 700
        }

        .info-overlay-holder dd {
            float: left;
            width: 73%;
            margin: .5em 0 0 2%;
            padding: 0 0 .5em 0
        }

        .info-overlay-holder dt:after {
            content: ":"
        }

        .info-overlay-holder pre {
            font-size: 11px;
            line-height: 23px;
            border-radius: 0;
            background: #f6f3f3
        }

        .info-overlay-holder .tab {
            float: left;
            width: 100%;
            height: 350px;
            padding: 12px 12px 24px
        }

        .info-overlay-holder .tab h2 {
            font-size: 1.2em;
            margin: .5em 0 0;
            padding: .5em 0 .5em 1em;
            clear: both;
            border-top: solid 1px #efefef
        }

        .info-overlay-holder .tab h2:first-child {
            border-top: 0;
            padding-top: 0
        }

        .info-overlay-holder .tab pre {
            overflow-y: hidden;
            width: 100%;
            min-height: 100%
        }

        .info-overlay-holder .tab .preview {
            width: auto;
            max-width: 100%;
            max-height: 500px;
            border: solid 1px #666
        }

        .info-overlay-holder .tab dl:after {
            content: "";
            display: table;
            clear: both
        }

        .info-overlay-holder .tab.rendered-data {
            padding: 0
        }

        .info-overlay-holder .tab.rendered-data pre {
            padding: 12px 12px 24px
        }

        .info-overlay-holder .tab.rendered-data pre>code {
            white-space: pre-wrap
        }

        .resource-legend {
            margin: 0;
            padding: 0;
            font-size: .75em;
            line-height: 1.5em;
            display: inline-block
        }

        .resource-legend li {
            margin: 0 1em 0 0;
            padding: 0;
            white-space: nowrap;
            display: inline-block
        }

        .resource-legend li:before {
            content: "";
            width: 1em;
            height: 1em;
            margin: 0 .5em 0 0;
            vertical-align: text-top;
            display: inline-block
        }

        .resource-legend .legend-blocked:before {
            background: #aaa
        }

        .resource-legend .legend-dns:before {
            background: #159588
        }

        .resource-legend .legend-connect:before {
            background: #fd9727
        }

        .resource-legend .legend-ssl:before {
            background: #c141cd
        }

        .resource-legend .legend-send:before {
            background: #b0bec5
        }

        .resource-legend .legend-wait:before {
            background: #1ec659
        }

        .resource-legend .legend-receive:before {
            background: #1eaaf1
        }

        .icon {
            fill: #666
        }

        .icon-4xx,
        .icon-5xx,
        .icon-no-cache,
        .icon-no-gzip,
        .icon-warning {
            fill: #b55
        }

        .water-fall-chart .type-firstpaint .line-holder {
            stroke: #42f46e;
            stroke-opacity: 1;
            stroke-width: 3
        }

        .water-fall-chart .type-firstvisualchange .line-holder {
            stroke: #42f46e;
            stroke-opacity: 1;
            stroke-width: 3
        }

        .water-fall-chart .type-visualcomplete85 .line-holder {
            stroke: #e77;
            stroke-opacity: 1;
            stroke-width: 3
        }

        .water-fall-chart .type-lastvisualchange .line-holder {
            stroke: #ee42f4;
            stroke-opacity: 1;
            stroke-width: 3
        }

        .water-fall-chart .type-onload .line-holder {
            stroke: #9c99e5;
            stroke-opacity: 1;
            stroke-width: 3
        }

        .water-fall-chart .type-oncontentload .line-holder {
            stroke: #9842f4;
            stroke-opacity: 1;
            stroke-width: 3
        }

        .water-fall-chart .type-dominteractivetime .line-holder {
            stroke: #1842f4;
            stroke-opacity: 1;
            stroke-width: 2
        }

        .water-fall-chart .type-domcontentloadedtime .line-holder {
            stroke: #1212f4;
            stroke-opacity: 1;
            stroke-width: 2
        }

        .water-fall-chart {
            font-size: 14px
        }

        #page-selector {
            display: none;
            clear: both;
            margin: 1em 0
        }

        * {
            box-sizing: border-box
        }

        @media screen and (max-width:400px) {
            select {
                max-width: 100%
            }
        }

        .screenshot {
            padding: 4px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px
        }

        *,
        :after,
        :before {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        section {
            display: block;
            padding: 20px 0 0;
            border-top: 1px solid #ddd
        }

        #tabs a {
            display: inline-block;
            margin: 0 0 -1px;
            padding: 15px 22px;
            font-weight: 600;
            text-align: center;
            color: #bbb;
            border: 1px solid transparent;
            text-decoration: none;
            text-transform: uppercase
        }

        #tabs a:before {
            font-weight: 400
        }

        #tabs a:hover {
            color: #888;
            cursor: pointer
        }

        #tabs a:target:focus {
            outline: 0
        }

        #tabs a[selected] {
            color: #555;
            border: 1px solid #ddd;
            border-top: 2px solid #0095d2;
            border-bottom: 1px solid #fff
        }

        @media screen and (max-width:650px) {
            #tabs a {
                font-size: 0
            }

            #tabs a:before {
                margin: 0;
                font-size: 18px
            }
        }

        @media screen and (max-width:400px) {
            #tabs a {
                padding: 13px
            }
        }

        .group-item {
            position: relative;
            display: block;
            padding: 10px 15px;
            margin-bottom: -1px;
            background-color: #fff;
            border: 1px solid #ddd;
            font-weight: 700
        }

        .group-item.active {
            z-index: 2;
            color: #fff;
            background-color: #337ab7;
            border-color: #337ab7
        }

        .group-item:first-child {
            border-top-left-radius: 4px;
            border-top-right-radius: 4px
        }

        .group-item:last-child {
            margin-bottom: 0;
            border-bottom-right-radius: 4px;
            border-bottom-left-radius: 4px
        }


        .loader,
        .loader:after,
        .loader:before {
            background: #000;
            -webkit-animation: load1 1s infinite ease-in-out;
            animation: load1 1s infinite ease-in-out;
            width: 1em;
            height: 4em
        }

        .loader {
            color: #000;
            text-indent: -9999em;
            margin: 88px auto;
            position: relative;
            font-size: 11px;
            -webkit-transform: translateZ(0);
            -ms-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-animation-delay: -.16s;
            animation-delay: -.16s
        }

        .loader:after,
        .loader:before {
            position: absolute;
            top: 0;
            content: ''
        }

        .loader:before {
            left: -1.5em;
            -webkit-animation-delay: -.32s;
            animation-delay: -.32s
        }

        .loader:after {
            left: 1.5em
        }

        @-webkit-keyframes load1 {

            0%,
            100%,
            80% {
                box-shadow: 0 0;
                height: 4em
            }

            40% {
                box-shadow: 0 -2em;
                height: 5em
            }
        }

        @keyframes load1 {

            0%,
            100%,
            80% {
                box-shadow: 0 0;
                height: 4em
            }

            40% {
                box-shadow: 0 -2em;
                height: 5em
            }
        }

        .filmstrip {
            padding-bottom: 20px
        }

        .videoframe {
            vertical-align: top;
            display: inline-block;
            padding: 4px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100%
        }

        .videoframe.blue {
            border: 2px solid #0095d2
        }

        .videoframetime {
            text-align: center;
            display: block
        }

        .videoframetext {
            text-align: left;
            display: block;
            line-height: 1.2em;
            font-size: .8em;
            white-space: nowrap;
        }

        .donut {
            background: #fff; position: relative;
            color: #fff;
            float: left;
            width: 300px;
            height: 150px;
            margin: 0 20px 20px 0;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
            clear: both;
        }

        .donut-textfield {
            position: absolute;
            top: 60px;
            left: 0;
            right: 0;
            text-align: center;
        }

        .donut-textfield a {
            text-decoration: none;
            color: #000;
            font-size: 0.8em;
            font-weight: 300;

        }

        .donut-canvas {
           display: inline-block;
           position: relative;
        }

        /*initiator and file types*/
        .css {background: #afd899;}
        .iframe,
        .html,
        .internal {background: #85b3f2;}
        .img,
        .image {background: #bc9dd6;}
        .script,
        .js {background: #e7bd8c;}
        .link {background: #89afe6;}
        .swf,
        .flash {background: #4db3ba;}
        .font {background: #e96859;}
        .xmlhttprequest,
        .ajax {background: #e7d98c;}
        .other {background: #bebebe;}

        .css-light {background: #b9cfa0;}
        .iframe-light,
        .html-light,
        .internal-light {background: #c2d9f9;}
        .img-light,
        .image-light {background: #deceeb;}
        .script-light,
        .js-light {background: #f3dec6;}
        .link-light {background: #c4d7f3;}
        .swf-light,
        .flash-light {background: #a6d9dd;}
        .font-light {background: #f4b4ac;}
        .xmlhttprequest-light,
        .ajax-light {background: #f3ecc6;}
        .other-light {background: #dfdfdf;}

        /*block colours*/
        .block-css {fill: #afd899;}
        .block-iframe,
        .block-html,
        .block-internal {fill: #85b3f2;}
        .block-img,
        .block-image {fill: #bc9dd6;}
        .block-script,
        .block-js {fill: #e7bd8c;}
        .block-link {fill: #89afe6;}
        .block-swf,
        .block-flash {fill: #4db3ba;}
        .block-font {fill: #e96859;}
        .block-xmlhttprequest,
        .block-ajax {fill: #e7d98c;}
        .block-other {fill: #bebebe;}

        .block-total {fill: #ccc;}
        .block-unload {fill: #909;}
        .block-redirect {fill: #ffff60;}
        .block-appcache {fill: #1f831f;}
        .block-dns {fill: #1f7c83;}
        .block-tcp {fill: #e58226;}
        .block-ttfb {fill: #1fe11f;}
        .block-response {fill: #1977dd;}
        .block-dom {fill: #9cc;}
        .block-dom-content-loaded {fill: #d888df;}
        .block-onload {fill: #c0c0ff;}

        .block-ssl {fill: #c141cd; }
        .block-ms-first-paint-event {fill: #8fbc83; }
        .block-dom-interactive-event {fill: #d888df; }
        .block-network-server {fill: #8cd18c; }
        .block-custom-measure {fill: #f00; }

        .block-navigation-api-total {fill: #ccc;}
        .block-blocking {fill: #cdcdcd;}

        .block-undefined {fill: #0f0;}

        /*All Water Fall Charts */
        .water-fall-holder {fill:#ccc;}

        .water-fall-chart {width:100%; background:#fff;}
        .water-fall-chart .marker-holder {width:100%;}
        .water-fall-chart .line-holder {stroke-width:1; stroke: #ccc; stroke-opacity:0.5;}
        .water-fall-chart .line-holder.active {stroke: #69009e; stroke-width:2; stroke-opacity:1;}
        .water-fall-chart .labels {width:100%;}
        .water-fall-chart .labels .inner-label {pointer-events: none;}
        .water-fall-chart .time-block.active {opacity: 0.8;}
        .water-fall-chart .line-end, .water-fall-chart .line-start {display: none; stroke-width:1; stroke-opacity:0.5; stroke: #000;}
        .water-fall-chart .line-end.active, .water-fall-chart .line-start.active {display: block;}
        .water-fall-chart .mark-holder text {-webkit-writing-mode: tb; writing-mode:vertical-lr; writing-mode: tb;}

        .time-scale line {stroke:#0cc; stroke-width:1;}
        .time-scale text {font-weight:bold;}

        .domain-selector {float:right; margin: -35px 0 0 0;}

        .legends-group { display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; display: flex; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
        .legends-group .legend-holder { flex-grow: 1; width:250px; padding:0 1em 1em; }
        .legends-group .legend-holder h4 { margin: 0; padding: 0; }

        .legend dt {float: left; clear: left; padding: 0 0 0.5em;}
        .legend dd {float: left; display: inline-block; margin: 0 1em; line-height: 1em;}
        .legend .colorBoxHolder span {display: inline-block; width: 15px; height: 1em;}

        #svg_legend {
            margin-top: 3.5rem;
        }

        #svg_legend section {
            padding: 0 0 0;
        }

        .inline { display: inline-block; justify-content: center;}

        .tile {margin-left: 10px; font-weight: 300; }

        .tile-row {justify-content: center; display: flex; align-items: center; margin-top: 1rem;}

        .img-hover-zoom--quick-zoom .frameImg {
          transform-origin: 0.5 0.5;
          transition: transform .25s, visibility .25s ease-in;
        }

        .img-hover-zoom--quick-zoom:hover .frameImg {
          transform: scale(2);
        }
    </style>
    <script type="text/javascript">
        function toggleRow(e){const t=e.nextSibling.getElementsByClassName("u-hideable");for(let e=0;e<t.length;++e){const n=t[e].currentStyle?t[e].currentStyle.display:getComputedStyle(t[e],null).display;t[e].style.display="none"===n?"table-row":"none"}}function openFull(e){var t=document.getElementById("openFull_"+e),n=document.getElementById("frame_"+e),o=document.getElementById("frameModal_"+e),a=document.getElementById("caption_"+e);n.onclick=function(){t.style.display="block",o.src=this.src,a.innerHTML=n.alt},document.getElementById("close_"+e).onclick=function(){t.style.display="none"}}function drawChart(e){var t=JSON.parse(e),n=document.getElementById("timeLine"),o=new google.visualization.Timeline(n),a=new google.visualization.DataTable;a.addColumn({type:"string",id:"Term"}),a.addColumn({type:"string",id:"Phase"}),a.addColumn({type:"number",id:"Start"}),a.addColumn({type:"number",id:"End"}),a.addRows([["1","Total Time",t.navigationStart,t.loadEventEnd],["2","Network",t.navigationStart,t.fetchStart],["3","Time To First Bite",t.fetchStart,t.requestStart],["4","Request",t.requestStart,t.responseStart],["5","Responce",t.responseStart,t.responseEnd],["6","Dom Processing",t.domLoading,t.domComplete],["7","Load Event",t.loadEventStart,t.loadEventEnd]]);o.draw(a,{timeline:{showRowLabels:!1},animation:{startup:!0,duration:1e3,easing:"in"},avoidOverlappingGridLines:!0,backgroundColor:"#fff",colors:["#94499C","#1072BA","#F2E208","#F08821","#65B345","#514b43"]});var i=document.getElementsByTagName("g");i[1].parentNode.removeChild(i[1])}function drawChartRes(e){var t=JSON.parse(e),n=document.getElementById("timeLine2"),o=new google.visualization.Timeline(n),a=new google.visualization.DataTable;a.addColumn({type:"string",id:"Type"}),a.addColumn({type:"string",id:"Name"}),a.addColumn({type:"number",id:"Start"}),a.addColumn({type:"number",id:"End"}),a.addRows(function(e){var t=[];for(const n of e)t.push([n.initiatorType.toString(),n.name.substring(0,40),n.startTime,n.responseEnd]);return t}(t));google.visualization.events.addListener(o,"select",function(){(selection=o.getSelection(),selection.length>0)&&createPopUp(t[selection[0].row])}),o.draw(a,{timeline:{showRowLabels:!1,colorByRowLabel:!0,groupByRowLabel:!1,showBarLabels:!0}});var i=document.getElementsByTagName("g");i[7].parentNode.removeChild(i[7])}function createPopUp(e){var t,n;document.getElementById("resPopUp").style.display="block",document.getElementById("resName").children[1].innerHTML=e.name,document.getElementById("resDomain").children[1].innerHTML=(t=e.name,(n=/http(?:s)?:\/\/(?:[\w-]+\.)*([\w-]{1,63})(?:\.(?:\w{3}|\w{2}))(?:$|\/)/).test(t)?n.exec(t)[0]:"can't extract domain"),document.getElementById("resInitiator").children[1].innerHTML=e.initiatorType,document.getElementById("resDuration").children[1].innerHTML=Math.floor(e.duration)+" ms",document.getElementById("resSize").children[1].innerHTML=e.transferSize/1e3+" kb"}function closeResPopUp(){document.getElementById("resPopUp").style.display="none"}function setInterval(){var e=document.getElementsByClassName("google-visualization-tooltip-action");2==e.length&&e[0].parentNode.removeChild(e[0]),e=null}function drawGauge(e,t){var n="#3D9C06";e>60&&90>e?n="#DEBC14":60>e&&(n="#A03232");var o={angle:.35,lineWidth:.1,radiusScale:1,pointer:{length:.6,strokeWidth:.035,color:"#000000"},limitMax:!1,limitMin:!1,colorStart:n,colorStop:n,strokeColor:"#EEEEEE",generateGradient:!0,highDpiSupport:!0},a=document.getElementById(t),i=new Donut(a).setOptions(o);i.maxValue=100,i.setMinValue(0),i.animationSpeed=32,i.set(e)}
    </script>
</head>
<body>
    <div class="content">
        <div class="row">
            <div class="nine columns">
                <h1>PerfUI Test for {{ page_name }} Page</h1>
            </div>
            <div class="three columns">
                <h2>Test status:&nbsp;<span class="label normal {{ test_status }}">{{ str_test_status }}</span></h2>
            </div>
        </div>
        <div class="row">
            <div class="three columns">
                <div class="donut">
                    <canvas id="performance" class="donut-canvas"></canvas>
                    <div class="donut-textfield"><a href="#perf">Performance<br />{{ perf_score }}</a></div>
                </div>
            </div>
            <div class="three columns">
                <div class="donut">
                    <canvas id="privacy" class="donut-canvas"></canvas>
                    <div class="donut-textfield"><a href="#priv">Privacy<br />{{ priv_score }}</a></div>
                </div>
            </div>
            <div class="three columns">
                <div class="donut">
                    <canvas id="accessibility" class="donut-canvas"></canvas>
                    <div class="donut-textfield"><a href="#access">Accessibility<br />{{ acc_score }}</a></div>
                </div>
            </div>
            <div class="three columns">
                <div class="donut">
                    <canvas id="best-practices" class="donut-canvas"></canvas>
                    <div class="donut-textfield"><a href="#bp">Best Practices<br />{{ bp_score }}</a></div>
                </div>
            </div>
        </div>
        <div class="row tile-row" id="tiles1"></div>
        <div class="row tile-row" id="tiles2"></div>
        <div class="row">
            <div class="twelve columns" id="svg_legend">
                <div id="frames_container">
                    {% for screenshot in screenshots %}
                    <div class="divFrame img-hover-zoom--quick-zoom">
                        <img class="frameImg" src="data:image/jpg;base64,{{ screenshot }}" alt="load frame" id="frame_{{ loop.index }}" onclick="openFull(0)"/>
                        <div class="modal" id="openFull_{{ loop.index }}" style="display:none">
                            <span class="close" id="close_{{ loop.index }}">&times;</span>
                            <img class="contentImg" id="frameModal_{{ loop.index }}"/>
                            <div class="caption" id="caption_{{ loop.index }}"></div>
                        </div>
                        <div class="frameFooter"></div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                <a id="access"></a><h3>Accessibility advice ({{ acc_score }})</h3>
                {% if acc_findings %}
                <table class="table table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th>Title</th>
                            <th>Advice</th>
                            <th>Score</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for finding in acc_findings %}
                        <tr class="header">
                            <td>{{ finding['title'] }}</td>
                            <td>{{ finding['advice'] }}</td>
                            <td>{{ finding['score'] }}</td>
                            <td>{% if finding['details'] %}<span>+</span>{% endif %}</td>
                        </tr>
                        {% if finding['details'] %}
                        <tr class="description">
                            <td><b>Details:</b> <p>{{ finding['description'] }}</p></td>
                            <td colspan="3">
                                <b>Instances:</b>
                                {% for detail in finding['details'] %}
                                    <p>{{ detail }}</p>
                                {% endfor %}
                            </td>
                        </tr>
                        {% endif %}
                    {% endfor %}
                    </tbody>
                </table>
                {% else %}
                    <p>Your accessibility practices score are perfect!</p>
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                <a id="perf"></a><h3>Performance advice ({{ perf_score }})</h3>
                {% if perf_findings %}
                <table class="table table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th>Title</th>
                            <th>Advice</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for finding in perf_findings %}
                        <tr class="header">
                            <td>{{ finding['title'] }}</td>
                            <td>{{ finding['advice'] }} <span>+</span></td>
                            <td>{{ finding['score'] }}</td>
                        </tr>
                        <tr class="description">
                            <td colspan="3">
                                <div>
                                    {{ finding['details']|safe }}
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% else %}
                    <p>Your performance practices score are perfect!</p>
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                <a id="bp"></a><h3>Best practice advice ({{ bp_score }})</h3>
                {% if bp_findings %}
                <table class="table table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th>Title</th>
                            <th>Advice</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for finding in bp_findings %}
                        <tr class="header">
                            <td>{{ finding['title'] }}</td>
                            <td>{{ finding['advice'] }} <span>+</span></td>
                            <td>{{ finding['score'] }}</td>
                        </tr>
                        <tr class="description">
                            <td colspan="3">
                                <div>
                                    {{ finding['details']|safe }}
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% else %}
                    <p>Your best practices score are perfect!</p>
                {% endif %}
            </div>
        </div>
        <div class="row">
            <div class="twelve columns">
                <a id="priv"></a><h3>Best practice advice ({{ priv_score }})</h3>
                {% if priv_findings %}
                <table class="table table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th>Title</th>
                            <th>Advice</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for finding in priv_findings %}
                        <tr class="header">
                            <td>{{ finding['title'] }}</td>
                            <td>{{ finding['advice'] }} <span>+</span></td>
                            <td>{{ finding['score'] }}</td>
                        </tr>
                        <tr class="description">
                            <td colspan="3">
                                <div>
                                    {{ finding['details']|safe }}
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% else %}
                    <p>Your Privacy related practices score are perfect!</p>
                {% endif %}
            </div>
        </div>
        <a id="info"></a>
        <h2>Page info</h2>
            <div class="row">
                <div class="one-half column">
                    <table>
                        <tr>
                            <th colspan="2">{{ page_name }}</th>
                        </tr>
                        <tr>
                            <td>Browser</td>
                            <td class="number">{{ info['browser'] }}</td>
                        </tr>
                        <tr>
                            <td>windowSize</td>
                            <td class="number">{{ info['windowSize'] }}</td>
                        </tr>
                        <tr>
                            <td>Width</td>
                            <td class="number">{{ info['documentWidth'] }}</td>
                        </tr>
                        <tr>
                            <td>Height</td>
                            <td class="number">{{ info['documentHeight'] }}</td>
                        </tr>
                        <tr>
                            <td>DOM elements</td>
                            <td class="number">{{ info['domElements'] }}</td>
                        </tr>
                        <tr>
                            <td>Avg DOM depth</td>
                            <td class="number">{{ info['domDepth']['avg'] }}</td>
                        </tr>
                        <tr>
                            <td>Max DOM depth</td>
                            <td class="number">{{ info['domDepth']['max'] }}</td>
                        </tr>
                        <tr>
                            <td>Iframes</td>
                            <td class="number">{{ info['iframes'] }}</td>
                        </tr>
                        <tr>
                            <td>Script tags</td>
                            <td class="number">{{ info['scripts'] }}</td>
                        </tr>
                        <tr>
                            <td>Local storage</td>
                            <td class="number">{{ info['storageSize'] }} bytes</td>
                        </tr>
                        <tr>
                            <td>Session storage</td>
                            <td class="number">{{ info['sessionStorageSize'] }} bytes</td>
                        </tr>
                        <tr>
                            <td>HTML vs AMP</td>
                            <td class="number">{% if amp %} AMP {% else %} HTML {% endif %}</td>
                        </tr>
                    </table>
                </div>
            </div>
    </div>
    <!--reference in js/gauge.min.js-->
    <script type="text/javascript">
            (function(){function t(t,i){for(var e in i)m.call(i,e)&&(t[e]=i[e]);function s(){this.constructor=t}return s.prototype=i.prototype,t.prototype=new s,t.__super__=i.prototype,t}var i,e,s,n,o,p,a,h,r,l,g,c,u,d=[].slice,m={}.hasOwnProperty,x=[].indexOf||function(t){for(var i=0,e=this.length;i<e;i++)if(i in this&&this[i]===t)return i;return-1};function f(t,i){null==t&&(t=!0),this.clear=null==i||i,t&&AnimationUpdater.add(this)}function v(){return v.__super__.constructor.apply(this,arguments)}function y(t,i){this.el=t,this.fractionDigits=i}function V(t,i){if(this.elem=t,this.text=null!=i&&i,V.__super__.constructor.call(this),void 0===this.elem)throw new Error("The element isn't defined.");this.value=1*this.elem.innerHTML,this.text&&(this.value=0)}function w(t){if(this.gauge=t,void 0===this.gauge)throw new Error("The element isn't defined.");this.ctx=this.gauge.ctx,this.canvas=this.gauge.canvas,w.__super__.constructor.call(this,!1,!1),this.setOptions()}function S(t){this.elem=t}function M(t){var i,e;this.canvas=t,M.__super__.constructor.call(this),this.percentColors=null,"undefined"!=typeof G_vmlCanvasManager&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),i=this.canvas.clientHeight,e=this.canvas.clientWidth,this.canvas.height=i,this.canvas.width=e,this.gp=[new p(this)],this.setOptions()}function C(t){this.canvas=t,C.__super__.constructor.call(this),"undefined"!=typeof G_vmlCanvasManager&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.setOptions(),this.render()}function _(){return _.__super__.constructor.apply(this,arguments)}!function(){var s,n,t,o,i,e,a;for(t=0,i=(a=["ms","moz","webkit","o"]).length;t<i&&(e=a[t],!window.requestAnimationFrame);t++)window.requestAnimationFrame=window[e+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"];s=null,o=0,n={},requestAnimationFrame?window.cancelAnimationFrame||(s=window.requestAnimationFrame,window.requestAnimationFrame=function(t,i){var e;return e=++o,s(function(){if(!n[e])return t()},i),e},window.cancelAnimationFrame=function(t){return n[t]=!0}):(window.requestAnimationFrame=function(t,i){var e,s,n,o;return e=(new Date).getTime(),o=Math.max(0,16-(e-n)),s=window.setTimeout(function(){return t(e+o)},o),n=e+o,s},window.cancelAnimationFrame=function(t){return clearTimeout(t)})}(),u=function(t){var i,e;for(t-=3600*(i=Math.floor(t/3600))+60*(e=Math.floor((t-3600*i)/60)),t+="",e+="";e.length<2;)e="0"+e;for(;t.length<2;)t="0"+t;return(i=i?i+":":"")+e+":"+t},g=function(){var t,i,e;return e=(i=1<=arguments.length?d.call(arguments,0):[])[0],t=i[1],r(e.toFixed(t))},c=function(t,i){var e,s,n;for(e in s={},t)m.call(t,e)&&(n=t[e],s[e]=n);for(e in i)m.call(i,e)&&(n=i[e],s[e]=n);return s},r=function(t){var i,e,s,n;for(s=(e=(t+="").split("."))[0],n="",1<e.length&&(n="."+e[1]),i=/(\d+)(\d{3})/;i.test(s);)s=s.replace(i,"$1,$2");return s+n},l=function(t){return"#"===t.charAt(0)?t.substring(1,7):t},f.prototype.animationSpeed=32,f.prototype.update=function(t){var i;return null==t&&(t=!1),!(!t&&this.displayedValue===this.value||(this.ctx&&this.clear&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),i=this.value-this.displayedValue,Math.abs(i/this.animationSpeed)<=.001?this.displayedValue=this.value:this.displayedValue=this.displayedValue+i/this.animationSpeed,this.render(),0))},t(v,h=f),v.prototype.displayScale=1,v.prototype.forceUpdate=!0,v.prototype.setTextField=function(t,i){return this.textField=t instanceof a?t:new a(t,i)},v.prototype.setMinValue=function(t,i){var e,s,n,o,a;if(this.minValue=t,null==i&&(i=!0),i){for(this.displayedValue=this.minValue,a=[],s=0,n=(o=this.gp||[]).length;s<n;s++)e=o[s],a.push(e.displayedValue=this.minValue);return a}},v.prototype.setOptions=function(t){return null==t&&(t=null),this.options=c(this.options,t),this.textField&&(this.textField.el.style.fontSize=t.fontSize+"px"),.5<this.options.angle&&(this.options.angle=.5),this.configDisplayScale(),this},v.prototype.configDisplayScale=function(){var t,i,e,s,n;return s=this.displayScale,!1===this.options.highDpiSupport?delete this.displayScale:(i=window.devicePixelRatio||1,t=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,this.displayScale=i/t),this.displayScale!==s&&(n=this.canvas.G__width||this.canvas.width,e=this.canvas.G__height||this.canvas.height,this.canvas.width=n*this.displayScale,this.canvas.height=e*this.displayScale,this.canvas.style.width=n+"px",this.canvas.style.height=e+"px",this.canvas.G__width=n,this.canvas.G__height=e),this},v.prototype.parseValue=function(t){return t=parseFloat(t)||Number(t),isFinite(t)?t:0},s=v,y.prototype.render=function(t){return this.el.innerHTML=g(t.displayedValue,this.fractionDigits)},a=y,t(V,h),V.prototype.displayedValue=0,V.prototype.value=0,V.prototype.setVal=function(t){return this.value=1*t},V.prototype.render=function(){var t;return t=this.text?u(this.displayedValue.toFixed(0)):r(g(this.displayedValue)),this.elem.innerHTML=t},i=V,t(w,h),w.prototype.displayedValue=0,w.prototype.value=0,w.prototype.options={strokeWidth:.035,length:.1,color:"#000000",iconPath:null,iconScale:1,iconAngle:0},w.prototype.img=null,w.prototype.setOptions=function(t){if(null==t&&(t=null),this.options=c(this.options,t),this.length=2*this.gauge.radius*this.gauge.options.radiusScale*this.options.length,this.strokeWidth=this.canvas.height*this.options.strokeWidth,this.maxValue=this.gauge.maxValue,this.minValue=this.gauge.minValue,this.animationSpeed=this.gauge.animationSpeed,this.options.angle=this.gauge.options.angle,this.options.iconPath)return this.img=new Image,this.img.src=this.options.iconPath},w.prototype.render=function(){var t,i,e,s,n,o,a,h,r;if(t=this.gauge.getAngle.call(this,this.displayedValue),h=Math.round(this.length*Math.cos(t)),r=Math.round(this.length*Math.sin(t)),o=Math.round(this.strokeWidth*Math.cos(t-Math.PI/2)),a=Math.round(this.strokeWidth*Math.sin(t-Math.PI/2)),i=Math.round(this.strokeWidth*Math.cos(t+Math.PI/2)),e=Math.round(this.strokeWidth*Math.sin(t+Math.PI/2)),this.ctx.beginPath(),this.ctx.fillStyle=this.options.color,this.ctx.arc(0,0,this.strokeWidth,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(o,a),this.ctx.lineTo(h,r),this.ctx.lineTo(i,e),this.ctx.fill(),this.img)return s=Math.round(this.img.width*this.options.iconScale),n=Math.round(this.img.height*this.options.iconScale),this.ctx.save(),this.ctx.translate(h,r),this.ctx.rotate(t+Math.PI/180*(90+this.options.iconAngle)),this.ctx.drawImage(this.img,-s/2,-n/2,s,n),this.ctx.restore()},p=w,S.prototype.updateValues=function(t){return this.value=t[0],this.maxValue=t[1],this.avgValue=t[2],this.render()},S.prototype.render=function(){var t,i;return this.textField&&this.textField.text(g(this.value)),0===this.maxValue&&(this.maxValue=2*this.avgValue),i=this.value/this.maxValue*100,t=this.avgValue/this.maxValue*100,$(".bar-value",this.elem).css({width:i+"%"}),$(".typical-value",this.elem).css({width:t+"%"})},t(M,s),M.prototype.elem=null,M.prototype.value=[20],M.prototype.maxValue=80,M.prototype.minValue=0,M.prototype.displayedAngle=0,M.prototype.displayedValue=0,M.prototype.lineWidth=40,M.prototype.paddingTop=.1,M.prototype.paddingBottom=.1,M.prototype.percentColors=null,M.prototype.options={colorStart:"#6fadcf",colorStop:void 0,gradientType:0,strokeColor:"#e0e0e0",pointer:{length:.8,strokeWidth:.035,iconScale:1},angle:.15,lineWidth:.44,radiusScale:1,fontSize:40,limitMax:!1,limitMin:!1},M.prototype.setOptions=function(t){var i,e,s,n,o;for(null==t&&(t=null),M.__super__.setOptions.call(this,t),this.configPercentColors(),this.extraPadding=0,this.options.angle<0&&(n=Math.PI*(1+this.options.angle),this.extraPadding=Math.sin(n)),this.availableHeight=this.canvas.height*(1-this.paddingTop-this.paddingBottom),this.lineWidth=this.availableHeight*this.options.lineWidth,this.radius=(this.availableHeight-this.lineWidth/2)/(1+this.extraPadding),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),e=0,s=(o=this.gp).length;e<s;e++)(i=o[e]).setOptions(this.options.pointer),i.render();return this.render(),this},M.prototype.configPercentColors=function(){var t,i,e,s,n,o,a;if(this.percentColors=null,void 0!==this.options.percentColors){for(this.percentColors=new Array,o=[],e=s=0,n=this.options.percentColors.length-1;0<=n?s<=n:n<=s;e=0<=n?++s:--s)a=parseInt(l(this.options.percentColors[e][1]).substring(0,2),16),i=parseInt(l(this.options.percentColors[e][1]).substring(2,4),16),t=parseInt(l(this.options.percentColors[e][1]).substring(4,6),16),o.push(this.percentColors[e]={pct:this.options.percentColors[e][0],color:{r:a,g:i,b:t}});return o}},M.prototype.set=function(t){var i,e,s,n,o,a,h,r,l;for(t instanceof Array||(t=[t]),e=s=0,h=t.length-1;0<=h?s<=h:h<=s;e=0<=h?++s:--s)t[e]=this.parseValue(t[e]);if(t.length>this.gp.length)for(e=n=0,r=t.length-this.gp.length;0<=r?n<r:r<n;e=0<=r?++n:--n)(i=new p(this)).setOptions(this.options.pointer),this.gp.push(i);else t.length<this.gp.length&&(this.gp=this.gp.slice(this.gp.length-t.length));for(a=e=0,o=t.length;a<o;a++)(l=t[a])>this.maxValue?this.options.limitMax?l=this.maxValue:this.maxValue=l+1:l<this.minValue&&(this.options.limitMin?l=this.minValue:this.minValue=l-1),this.gp[e].value=l,this.gp[e++].setOptions({minValue:this.minValue,maxValue:this.maxValue,angle:this.options.angle});return this.value=Math.max(Math.min(t[t.length-1],this.maxValue),this.minValue),AnimationUpdater.add(this),AnimationUpdater.run(this.forceUpdate),this.forceUpdate=!1},M.prototype.getAngle=function(t){return(1+this.options.angle)*Math.PI+(t-this.minValue)/(this.maxValue-this.minValue)*(1-2*this.options.angle)*Math.PI},M.prototype.getColorForPercentage=function(t,i){var e,s,n,o,a,h,r;if(0===t)e=this.percentColors[0].color;else for(e=this.percentColors[this.percentColors.length-1].color,n=o=0,h=this.percentColors.length-1;0<=h?o<=h:h<=o;n=0<=h?++o:--o)if(t<=this.percentColors[n].pct){e=!0===i?(r=this.percentColors[n-1]||this.percentColors[0],s=this.percentColors[n],a=(t-r.pct)/(s.pct-r.pct),{r:Math.floor(r.color.r*(1-a)+s.color.r*a),g:Math.floor(r.color.g*(1-a)+s.color.g*a),b:Math.floor(r.color.b*(1-a)+s.color.b*a)}):this.percentColors[n].color;break}return"rgb("+[e.r,e.g,e.b].join(",")+")"},M.prototype.getColorForValue=function(t,i){var e;return e=(t-this.minValue)/(this.maxValue-this.minValue),this.getColorForPercentage(e,i)},M.prototype.renderStaticLabels=function(t,i,e,s){var n,o,a,h,r,l,p,c,u,d;for(this.ctx.save(),this.ctx.translate(i,e),l=/\d+\.?\d?/,r=(n=t.font||"10px Times").match(l)[0],c=n.slice(r.length),o=parseFloat(r)*this.displayScale,this.ctx.font=o+c,this.ctx.fillStyle=t.color||"#000000",this.ctx.textBaseline="bottom",this.ctx.textAlign="center",a=0,h=(p=t.labels).length;a<h;a++)void 0!==(d=p[a]).label?(!this.options.limitMin||d>=this.minValue)&&(!this.options.limitMax||d<=this.maxValue)&&(r=(n=d.font||t.font).match(l)[0],c=n.slice(r.length),o=parseFloat(r)*this.displayScale,this.ctx.font=o+c,u=this.getAngle(d.label)-3*Math.PI/2,this.ctx.rotate(u),this.ctx.fillText(g(d.label,t.fractionDigits),0,-s-this.lineWidth/2),this.ctx.rotate(-u)):(!this.options.limitMin||d>=this.minValue)&&(!this.options.limitMax||d<=this.maxValue)&&(u=this.getAngle(d)-3*Math.PI/2,this.ctx.rotate(u),this.ctx.fillText(g(d,t.fractionDigits),0,-s-this.lineWidth/2),this.ctx.rotate(-u));return this.ctx.restore()},M.prototype.renderTicks=function(t,i,e,s){var n,o,a,h,r,l,p,c,u,d,g,m,x,f,v,y,V,w,S,M;if(t!=={}){for(l=t.divisions||0,w=t.subDivisions||0,a=t.divColor||"#fff",f=t.subColor||"#fff",h=t.divLength||.7,y=t.subLength||.2,u=parseFloat(this.maxValue)-parseFloat(this.minValue),d=parseFloat(u)/parseFloat(t.divisions),v=parseFloat(d)/parseFloat(t.subDivisions),n=parseFloat(this.minValue),o=0+v,r=(c=u/400)*(t.divWidth||1),V=c*(t.subWidth||1),m=[],S=p=0,g=l+1;p<g;S=p+=1)this.ctx.lineWidth=this.lineWidth*h,x=this.lineWidth/2*(1-h),M=this.radius*this.options.radiusScale+x,this.ctx.strokeStyle=a,this.ctx.beginPath(),this.ctx.arc(0,0,M,this.getAngle(n-r),this.getAngle(n+r),!1),this.ctx.stroke(),o=n+v,n+=d,S!==t.divisions&&0<w?m.push(function(){var t,i,e;for(e=[],t=0,i=w-1;t<i;t+=1)this.ctx.lineWidth=this.lineWidth*y,x=this.lineWidth/2*(1-y),M=this.radius*this.options.radiusScale+x,this.ctx.strokeStyle=f,this.ctx.beginPath(),this.ctx.arc(0,0,M,this.getAngle(o-V),this.getAngle(o+V),!1),this.ctx.stroke(),e.push(o+=v);return e}.call(this)):m.push(void 0);return m}},M.prototype.render=function(){var t,i,e,s,n,o,a,h,r,l,p,c,u,d,g,m;if(g=this.canvas.width/2,e=this.canvas.height*this.paddingTop+this.availableHeight-(this.radius+this.lineWidth/2)*this.extraPadding,t=this.getAngle(this.displayedValue),this.textField&&this.textField.render(this),this.ctx.lineCap="butt",l=this.radius*this.options.radiusScale,this.options.staticLabels&&this.renderStaticLabels(this.options.staticLabels,g,e,l),this.options.staticZones)for(this.ctx.save(),this.ctx.translate(g,e),this.ctx.lineWidth=this.lineWidth,s=0,o=(p=this.options.staticZones).length;s<o;s++)r=(m=p[s]).min,this.options.limitMin&&r<this.minValue&&(r=this.minValue),h=m.max,this.options.limitMax&&h>this.maxValue&&(h=this.maxValue),d=this.radius*this.options.radiusScale,m.height&&(this.ctx.lineWidth=this.lineWidth*m.height,u=this.lineWidth/2*(m.offset||1-m.height),d=this.radius*this.options.radiusScale+u),this.ctx.strokeStyle=m.strokeStyle,this.ctx.beginPath(),this.ctx.arc(0,0,d,this.getAngle(r),this.getAngle(h),!1),this.ctx.stroke();else void 0!==this.options.customFillStyle?i=this.options.customFillStyle(this):null!==this.percentColors?i=this.getColorForValue(this.displayedValue,this.options.generateGradient):void 0!==this.options.colorStop?((i=0===this.options.gradientType?this.ctx.createRadialGradient(g,e,9,g,e,70):this.ctx.createLinearGradient(0,0,g,0)).addColorStop(0,this.options.colorStart),i.addColorStop(1,this.options.colorStop)):i=this.options.colorStart,this.ctx.strokeStyle=i,this.ctx.beginPath(),this.ctx.arc(g,e,l,(1+this.options.angle)*Math.PI,t,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.stroke(),this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(g,e,l,t,(2-this.options.angle)*Math.PI,!1),this.ctx.stroke(),this.ctx.save(),this.ctx.translate(g,e);for(this.options.renderTicks&&this.renderTicks(this.options.renderTicks,g,e,l),this.ctx.restore(),this.ctx.translate(g,e),n=0,a=(c=this.gp).length;n<a;n++)c[n].update(!0);return this.ctx.translate(-g,-e)},o=M,t(C,s),C.prototype.lineWidth=15,C.prototype.displayedValue=0,C.prototype.value=33,C.prototype.maxValue=80,C.prototype.minValue=0,C.prototype.options={lineWidth:.1,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:.35,radiusScale:1},C.prototype.getAngle=function(t){return(1-this.options.angle)*Math.PI+(t-this.minValue)/(this.maxValue-this.minValue)*(2+this.options.angle-(1-this.options.angle))*Math.PI},C.prototype.setOptions=function(t){return null==t&&(t=null),C.__super__.setOptions.call(this,t),this.lineWidth=this.canvas.height*this.options.lineWidth,this.radius=this.options.radiusScale*(this.canvas.height/2-this.lineWidth/2),this},C.prototype.set=function(t){return this.value=this.parseValue(t),this.value>this.maxValue?this.options.limitMax?this.value=this.maxValue:this.maxValue=this.value:this.value<this.minValue&&(this.options.limitMin?this.value=this.minValue:this.minValue=this.value),AnimationUpdater.add(this),AnimationUpdater.run(this.forceUpdate),this.forceUpdate=!1},C.prototype.render=function(){var t,i,e,s;return t=this.getAngle(this.displayedValue),s=this.canvas.width/2,e=this.canvas.height/2,this.textField&&this.textField.render(this),(i=this.ctx.createRadialGradient(s,e,39,s,e,70)).addColorStop(0,this.options.colorStart),i.addColorStop(1,this.options.colorStop),this.radius,this.lineWidth,this.radius,this.lineWidth,this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(s,e,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.strokeStyle=i,this.ctx.beginPath(),this.ctx.arc(s,e,this.radius,(1-this.options.angle)*Math.PI,t,!1),this.ctx.stroke()},t(_,e=C),_.prototype.strokeGradient=function(t,i,e,s){var n;return(n=this.ctx.createRadialGradient(t,i,e,t,i,s)).addColorStop(0,this.options.shadowColor),n.addColorStop(.12,this.options._orgStrokeColor),n.addColorStop(.88,this.options._orgStrokeColor),n.addColorStop(1,this.options.shadowColor),n},_.prototype.setOptions=function(t){var i,e,s,n;return null==t&&(t=null),_.__super__.setOptions.call(this,t),n=this.canvas.width/2,i=this.canvas.height/2,e=this.radius-this.lineWidth/2,s=this.radius+this.lineWidth/2,this.options._orgStrokeColor=this.options.strokeColor,this.options.strokeColor=this.strokeGradient(n,i,e,s),this},n=_,window.AnimationUpdater={elements:[],animId:null,addAll:function(t){var i,e,s,n;for(n=[],e=0,s=t.length;e<s;e++)i=t[e],n.push(AnimationUpdater.elements.push(i));return n},add:function(t){if(x.call(AnimationUpdater.elements,t)<0)return AnimationUpdater.elements.push(t)},run:function(t){var i,e,s,n,o,a,h;if(null==t&&(t=!1),isFinite(parseFloat(t))||!0===t){for(i=!0,h=[],s=e=0,o=(a=AnimationUpdater.elements).length;e<o;s=++e)a[s].update(!0===t)?i=!1:h.push(s);for(n=h.length-1;0<=n;n+=-1)s=h[n],AnimationUpdater.elements.splice(s,1);return AnimationUpdater.animId=i?null:requestAnimationFrame(AnimationUpdater.run)}if(!1===t)return!0===AnimationUpdater.animId&&cancelAnimationFrame(AnimationUpdater.animId),AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run)}},"function"==typeof window.define&&null!=window.define.amd?define(function(){return{Gauge:o,Donut:n,BaseDonut:e,TextRenderer:a}}):"undefined"!=typeof module&&null!=module.exports?module.exports={Gauge:o,Donut:n,BaseDonut:e,TextRenderer:a}:(window.Gauge=o,window.Donut=n,window.BaseDonut=e,window.TextRenderer=a)}).call(this);
        </script>
        <!--reference in js/bookmarklet/resource_timing.js-->
        <script type="text/javascript">
            function addClass (el, className) {
	if(el.classList){
		el.classList.add(className);
	}else{
		// IE doesn't support classList in SVG - also no need for dublication check i.t.m.
		el.setAttribute("class", el.getAttribute("class") + " " + className);
	}
	return el;
};


function removeClass (el, className) {
	if(el.classList){
		el.classList.remove(className);
	}else{
		//IE doesn't support classList in SVG - also no need for dublication check i.t.m.
        el.setAttribute("class", el.getAttribute("class").replace(new RegExp("(\\s|^)" + className + "(\\s|$)", "g"), "$2"));
	}
	return el;
};

function newEl (tagName, settings, css){
	const el = document.createElementNS("http://www.w3.org/2000/svg", tagName);
	settings = settings || {};
	for(let attr in settings){
		if(attr != "text"){
			el.setAttributeNS(null, attr, settings[attr]);
		}
	}
	el.textContent = settings.text||"";
	el.style.cssText = css||"";
	return el;
};

function newTextEl (text, y, css) {
	return newEl("text", {
			fill : "#111",
			y : y,
			text : text
		}, (css||"") + " text-shadow:0 0 4px #fff;");
};

function getNodeTextWidth (parent_element, textNode) {
	const tmp = newEl("svg:svg", {}, "visibility:hidden;");
	tmp.appendChild(textNode);
	document.getElementById(parent_element).appendChild(tmp);

	const nodeWidth = textNode.getBBox().width;
	tmp.parentNode.removeChild(tmp);
	return nodeWidth;
};

function endsWith(str, suffix) {
	return str.indexOf(suffix, str.length - suffix.length) !== -1;
};

function getFileType(fileExtension, initiatorType) {
	if(fileExtension){
		switch(fileExtension){
			case "jpg" :
			case "jpeg" :
			case "png" :
			case "gif" :
			case "webp" :
			case "svg" :
			case "ico" :
				return "image";
			case "js" :
				return "js"
			case "css":
				return "css"
			case "html":
				return "html"
			case "woff":
			case "woff2":
			case "ttf":
			case "eot":
			case "otf":
				return "font"
			case "swf":
				return "flash"
			case "map":
				return "source-map"
		}
	}
	if(initiatorType){
		switch(initiatorType){
			case "xmlhttprequest" :
				return "ajax"
			case "img" :
				return "image"
			case "script" :
				return "js"
			case "internal" :
			case "iframe" :
				return "html" //actual page
			default :
				return "other"
		}
	}
	return initiatorType;
};

function getItemCount(arr, keyName) {
	let counts = {},
		resultArr = [],
		obj;

	arr.forEach((key) => {
		counts[key] = counts[key] ? counts[key]+1 : 1;
	});

	//pivot data
	for(let fe in counts){
		obj = {};
		obj[keyName||"key"] = fe;
		obj.count = counts[fe];

		resultArr.push(obj);
	}
	return resultArr.sort((a, b) => {
		return a.count < b.count ? 1 : -1;
	});
};

function getData(resources, marks, measures, timing) {
    const data = {
	    resources: resources,
	    marks: marks,
	    measures: measures,
	    perfTiming: timing,
	    allResourcesCalc: [],
	    isValid : () => isValid
    };

    data.allResourcesCalc = data.resources
		//remove this bookmarklet from the result
		.filter((currR) => !currR.name.match(/http[s]?\:\/\/(micmro|nurun).github.io\/performance-bookmarklet\/.*/))
		.map((currR, i, arr) => {
			//crunch the resources data into something easier to work with
			const isRequest = currR.name.indexOf("http") === 0;
			let  urlFragments, maybeFileName, fileExtension;

			if(isRequest){
				urlFragments = currR.name.match(/:\/\/(.[^/]+)([^?]*)\??(.*)/);
				maybeFileName = urlFragments[2].split("/").pop();
				fileExtension = maybeFileName.substr((Math.max(0, maybeFileName.lastIndexOf(".")) || Infinity) + 1);
			}else{
				urlFragments = ["", location.host];
				fileExtension = currR.name.split(":")[0];
			}

			const currRes = {
				name : currR.name,
				domain : urlFragments[1],
				initiatorType : currR.initiatorType || fileExtension || "SourceMap or Not Defined",
				fileExtension : fileExtension || "XHR or Not Defined",
				loadtime : currR.duration,
				fileType : getFileType(fileExtension, currR.initiatorType),
				isRequestToHost : urlFragments[1] === location.host
			};

			for(let attr in currR){
				if(typeof currR[attr] !== "function") {
					currRes[attr] = currR[attr];
				}
			}

			if(currR.requestStart){
				currRes.requestStartDelay = currR.requestStart - currR.startTime;
				currRes.dns = currR.domainLookupEnd - currR.domainLookupStart;
				currRes.tcp = currR.connectEnd - currR.connectStart;
				currRes.ttfb = currR.responseStart - currR.startTime;
				currRes.requestDuration = currR.responseStart - currR.requestStart;
			}
			if(currR.secureConnectionStart){
				currRes.ssl = currR.connectEnd - currR.secureConnectionStart;
			}

			return currRes;
		});

	//filter out non-http[s] and sourcemaps
	data.requestsOnly = data.allResourcesCalc.filter((currR) => {
		return currR.name.indexOf("http") === 0 && !currR.name.match(/js.map$/);
	});
	//get counts
	data.initiatorTypeCounts = getItemCount(data.requestsOnly.map((currR, i, arr) => {
		return currR.initiatorType || currR.fileExtension;
	}), "initiatorType");

	data.initiatorTypeCountHostExt = getItemCount(data.requestsOnly.map((currR, i, arr) => {
		return (currR.initiatorType  || currR.fileExtension) + " " + (currR.isRequestToHost ? "(host)" : "(external)");
	}), "initiatorType");

	data.requestsByDomain = getItemCount(data.requestsOnly.map((currR, i, arr) => currR.domain), "domain");

	data.fileTypeCountHostExt = getItemCount(data.requestsOnly.map((currR, i, arr) => {
		return currR.fileType  + " " + (currR.isRequestToHost ? "(host)" : "(external)");
	}), "fileType");

	data.fileTypeCounts = getItemCount(data.requestsOnly.map((currR, i, arr) => currR.fileType), "fileType");

	const tempResponseEnd = {};
	//TODO: make immutable
	data.requestsOnly.forEach((currR) => {
		const entry = data.requestsByDomain.filter((a) => a.domain == currR.domain)[0]||{};

		const lastResponseEnd = tempResponseEnd[currR.domain]||0;

		currR.duration = entry.duration||(currR.responseEnd - currR.startTime);

		if(lastResponseEnd <= currR.startTime){
			entry.durationTotalParallel = (entry.durationTotalParallel||0) + currR.duration;
		} else if (lastResponseEnd < currR.responseEnd){
			entry.durationTotalParallel = (entry.durationTotalParallel||0) + (currR.responseEnd - lastResponseEnd);
		}
		tempResponseEnd[currR.domain] = currR.responseEnd||0;
		entry.durationTotal = (entry.durationTotal||0) + currR.duration;
	});


	//Request counts
	data.hostRequests = data.requestsOnly
		.filter((domain) => domain.domain === location.host).length;

	data.currAndSubdomainRequests = data.requestsOnly
		.filter((domain) => domain.domain.split(".").slice(-2).join(".") === location.host.split(".").slice(-2).join("."))
		.length;

	data.crossDocDomainRequests = data.requestsOnly
		.filter((domain) => !endsWith(domain.domain, document.domain)).length;

	data.hostSubdomains = data.requestsByDomain
		.filter((domain) => endsWith(domain.domain, location.host.split(".").slice(-2).join(".")) && domain.domain !== location.host)
		.length;


	data.slowestCalls = [];
	data.average = undefined;

	if(data.allResourcesCalc.length > 0){
		data.slowestCalls = data.allResourcesCalc
			.filter((a) => a.name !== location.href)
			.sort((a, b) => b.duration - a.duration);

		data.average = Math.floor(data.slowestCalls.reduceRight((a,b) => {
			if(typeof a !== "number"){
				return a.duration + b.duration
			}
			return a + b.duration;
		}) / data.slowestCalls.length);
	}
	return data
}

function newTag (tagName, settings, css) {
	settings = settings || {};
	const tag = document.createElement(tagName);
	for(let attr in settings){
		if(attr != "text"){
			tag[attr] = settings[attr];
		}
	}
	if(settings.text){
		tag.textContent = settings.text;
	}else if(settings.childElement){
		if(typeof settings.childElement === "object"){
			//if childNodes NodeList is passed in
			if(settings.childElement instanceof NodeList){
				//NodeList is does not inherit from array
				Array.prototype.slice.call(settings.childElement,0).forEach((childNode) => {
					tag.appendChild(childNode);
				});
			}else{
				tag.appendChild(settings.childElement);
			}
		}else{
			tag.appendChild(newTextNode(settings.childElement));
		}
	}
	if(settings.class){
		tag.className = settings.class;
	}
	tag.style.cssText = css||"";
	return tag;
};

function getChartData (data, filter) {
	const calc = {
		pageLoadTime : data.perfTiming.loadEventEnd - data.perfTiming.responseStart,
		lastResponseEnd : data.perfTiming.loadEventEnd - data.perfTiming.responseStart,
	};

	for (let perfProp in data.perfTiming) {
		if(data.perfTiming[perfProp] && typeof data.perfTiming[perfProp] === "number"){
			calc[perfProp] = data.perfTiming[perfProp] - data.perfTiming.navigationStart;
		}
	}

	const onDomLoad = timeBlock("domContentLoaded Event", calc.domContentLoadedEventStart, calc.domContentLoadedEventEnd, "block-dom-content-loaded");
	const onLoadEvt = timeBlock("Onload Event", calc.loadEventStart, calc.loadEventEnd, "block-onload");
	const navigationApiTotal = [
		timeBlock("Unload", calc.unloadEventStart, calc.unloadEventEnd, "block-unload"),
		timeBlock("Redirect", calc.redirectStart, calc.redirectEnd, "block-redirect"),
		timeBlock("App cache", calc.fetchStart, calc.domainLookupStart, "block-appcache"),
		timeBlock("DNS", calc.domainLookupStart, calc.domainLookupEnd, "block-dns"),
		timeBlock("TCP", calc.connectStart, calc.connectEnd, "block-tcp"),
		timeBlock("Timer to First Byte", calc.requestStart, calc.responseStart, "block-ttfb"),
		timeBlock("Response", calc.responseStart, calc.responseEnd, "block-response"),
		timeBlock("DOM Processing", calc.domLoading, calc.domComplete, "block-dom"),
		onDomLoad,
		onLoadEvt
	];

	if(calc.secureConnectionStart){
		navigationApiTotal.push(timeBlock("SSL", calc.connectStart, calc.secureConnectionStart, "block-ssl"));
	}
	if(calc.msFirstPaint){
		navigationApiTotal.push(timeBlock("msFirstPaint Event", calc.msFirstPaint, calc.msFirstPaint, "block-ms-first-paint-event"));
	}
	if(calc.domInteractive){
		navigationApiTotal.push(timeBlock("domInteractive Event", calc.domInteractive, calc.domInteractive, "block-dom-interactive-event"));
	}
	if(!calc.redirectEnd && !calc.redirectStart && calc.fetchStart > calc.navigationStart){
		navigationApiTotal.push(timeBlock("Cross-Domain Redirect", calc.navigationStart, calc.fetchStart, "block-redirect"));
	}

	calc.blocks = [
		timeBlock("Navigation API total", 0, calc.loadEventEnd, "block-navigation-api-total", navigationApiTotal),
	];

	data.allResourcesCalc.filter((resource) => {
			//do not show items up to 15 seconds after onload - else beacon ping etc make diagram useless
			return resource.startTime < (calc.loadEventEnd + 15000)
		})
		.filter(filter||(() => true))
		.forEach((resource, i) => {
			const segments = [
				timeBlock("Redirect", resource.redirectStart, resource.redirectEnd, "block-redirect"),
				timeBlock("DNS Lookup", resource.domainLookupStart, resource.domainLookupEnd, "block-dns"),
				timeBlock("Initial Connection (TCP)", resource.connectStart, resource.connectEnd, "block-dns"),
				timeBlock("secureConnect", resource.secureConnectionStart||undefined, resource.connectEnd, "block-ssl"),
				timeBlock("Timer to First Byte", resource.requestStart, resource.responseStart, "block-ttfb"),
				timeBlock("Content Download", resource.responseStart||undefined, resource.responseEnd, "block-response")
			];

			const resourceTimings = [0, resource.redirectStart, resource.domainLookupStart, resource.connectStart, resource.secureConnectionStart, resource.requestStart, resource.responseStart];

			const firstTiming = resourceTimings.reduce((currMinTiming, currentValue) => {
				if(currentValue > 0 && (currentValue < currMinTiming || currMinTiming <= 0) && currentValue != resource.startTime){
					return currentValue;
				} else {
					return currMinTiming;
				}
			});

			if(resource.startTime < firstTiming){
				segments.unshift(timeBlock("Stalled/Blocking", resource.startTime, firstTiming, "block-blocking"));
			}

			calc.blocks.push(timeBlock(resource.name, resource.startTime, resource.responseEnd, "block-" + resource.initiatorType, segments, resource));
			calc.lastResponseEnd = Math.max(calc.lastResponseEnd || 1,resource.responseEnd);
		});
	return {
		loadDuration : Math.round(Math.max(calc.lastResponseEnd, (data.perfTiming.loadEventEnd-data.perfTiming.navigationStart))),
		blocks : calc.blocks,
		bg : [
			onDomLoad,
			onLoadEvt
		]
	};
};

function resourcesTimelineComponent(parent_element, resources, marks, measures, timing, labels_nodes) {
	var data = getData(resources, marks, measures, timing);
	var chartData = getChartData(data, "");
	const chartHolder = setupTimeLine(parent_element, chartData.loadDuration, chartData.blocks, data.marks, chartData.bg);

	if(data.requestsByDomain.length > 1){
		const selectBox = newTag("select", {
			class : "domain-selector",
			onchange : () => {
				const domain = document.getElementsByClassName("domain-selector")[0].options[document.getElementsByClassName("domain-selector")[0].selectedIndex].value;
				if(domain === "all"){
					chartData = getChartData(data, "");
				}else{
					chartData = getChartData(data, (resource) => resource.domain === domain);
				}
				const tempChartHolder = setupTimeLine(parent_element, chartData.loadDuration, chartData.blocks, data.marks, chartData.bg, "Temp");
				const oldSVG = chartHolder.getElementsByClassName("water-fall-chart")[0];
				const newSVG = tempChartHolder.getElementsByClassName("water-fall-chart")[0];
				chartHolder.replaceChild(newSVG, oldSVG);
			}
		});

		selectBox.appendChild(newTag("option", {
			text : "show all",
			value : "all"
		}));

		data.requestsByDomain.forEach((domain) => {
			selectBox.appendChild(newTag("option", {
				text : domain.domain
			}));
		});
		const chartSvg = chartHolder.getElementsByClassName("water-fall-chart")[0];
		document.getElementById(labels_nodes).parentNode.insertBefore(selectBox, document.getElementById(labels_nodes));
	}

	return chartHolder;
};

function timeBlock(name, start, end, cssClass, segments, rawResource){
	return {
		name : name,
		start : start,
		end : end,
		total : ((typeof start !== "number" || typeof end !== "number") ? undefined : (end - start)),
		cssClass : cssClass,
		segments : segments,
		rawResource : rawResource
	}
};

function setupTimeLine (parent_element, durationMs, blocks, marks, lines, title) {
	const unit = durationMs / 100,
		barsToShow = blocks
			.filter((block) => (typeof block.start == "number" && typeof block.total == "number"))
			.sort((a, b) => (a.start||0) - (b.start||0)),
		maxMarkTextLength = marks.length > 0 ? marks.reduce((currMax, currValue) => {
			return Math.max((typeof currMax == "number" ? currMax : 0), getNodeTextWidth(parent_element, newTextEl(currValue.name, "0")));
		}) : 0,
		diagramHeight = (barsToShow.length + 1) * 25,
		chartHolderHeight = diagramHeight + maxMarkTextLength + 35;

	const chartHolder = newTag("section", {
		class : "resource-timing water-fall-holder chart-holder"
	});
	const timeLineHolder = newEl("svg:svg", {
		height : Math.floor(chartHolderHeight),
		class : "water-fall-chart"
	});
	const timeLineLabelHolder = newEl("g", {class : "labels"});

	const endLine = newEl("line", {
		x1 : "0",
		y1 : "0",
		x2 : "0",
		y2 : diagramHeight,
		class : "line-end"
	});

	const startLine = newEl("line", {
		x1 : "0",
		y1 : "0",
		x2 : "0",
		y2 : diagramHeight,
		class : "line-start"
	});

	const onRectMouseEnter = (evt) => {
		const targetRect = evt.target;
		addClass(targetRect, "active");

		const xPosEnd = targetRect.x.baseVal.valueInSpecifiedUnits + targetRect.width.baseVal.valueInSpecifiedUnits + "%";
		const xPosStart = targetRect.x.baseVal.valueInSpecifiedUnits + "%";

		endLine.x1.baseVal.valueAsString = xPosEnd;
		endLine.x2.baseVal.valueAsString = xPosEnd;
		startLine.x1.baseVal.valueAsString = xPosStart;
		startLine.x2.baseVal.valueAsString = xPosStart;
		addClass(endLine, "active");
		addClass(startLine, "active");

		targetRect.parentNode.appendChild(endLine);
		targetRect.parentNode.appendChild(startLine);
	};

	const onRectMouseLeave = (evt) => {
		removeClass(evt.target, "active");
		removeClass(endLine, "active");
		removeClass(startLine, "active");
	};

	const createRect = (width, height, x, y, cssClass, label, segments) => {
		let rectHolder;
		const rect = newEl("rect", {
			width : (width / unit) + "%",
			height : height-1,
			x :  Math.round((x / unit)*100)/100 + "%",
			y : y,
			class : ((segments && segments.length > 0 ? "time-block" : "segment")) + " " +  (cssClass || "block-undefined")
		});
		if(label){
			rect.appendChild(newEl("title", {
				text : label
			})); // Add tile to wedge path
		}

		rect.addEventListener("mouseenter", onRectMouseEnter);
		rect.addEventListener("mouseleave", onRectMouseLeave);

		if(segments && segments.length > 0){
			rectHolder = newEl("g");
			rectHolder.appendChild(rect);
			segments.forEach((segment) => {
				if(segment.total > 0 && typeof segment.start === "number"){
					rectHolder.appendChild(createRect(segment.total, 8, segment.start||0.001, y, segment.cssClass, segment.name + " (" + Math.round(segment.start) + "ms - " +  Math.round(segment.end) + "ms | total: " + Math.round(segment.total) + "ms)"));
				}
			});
			return rectHolder;
		}else{
			return rect;
		}
	};

	const createBgRect = (block) => {
		const rect = newEl("rect", {
			width : ((block.total || 1) / unit) + "%",
			height : diagramHeight,
			x :  ((block.start||0.001) / unit) + "%",
			y : 0,
			class : block.cssClass || "block-undefined"
		});

		rect.appendChild(newEl("title", {
			text : block.name
		})); // Add tile to wedge path
		return rect;
	};

	const createTimeWrapper = () => {
		const timeHolder = newEl("g", { class : "time-scale full-width" });
		for(let i = 0, secs = durationMs / 1000, secPerc = 100 / secs; i <= secs; i++){
			const lineLabel = newTextEl(i + "sec",  diagramHeight);
			if(i > secs - 0.2){
				lineLabel.setAttribute("x", secPerc * i - 0.5 + "%");
				lineLabel.setAttribute("text-anchor", "end");
			}else{
				lineLabel.setAttribute("x", secPerc * i + 0.5 + "%");
			}

			const lineEl = newEl("line", {
				x1 : secPerc * i + "%",
				y1 : "0",
				x2 : secPerc * i + "%",
				y2 : diagramHeight
			});
			timeHolder.appendChild(lineEl);
			timeHolder.appendChild(lineLabel);
		}
		return timeHolder;
	};


	const renderMarks = () => {
		const marksHolder = newEl("g", {
			transform : "scale(1, 1)",
			class : "marker-holder"
		});

		marks.forEach((mark, i) => {
			const x = mark.startTime / unit;
			const markHolder = newEl("g", {
				class : "mark-holder"
			});
			const lineHolder = newEl("g", {
				class : "line-holder"
			});
			const lineLabelHolder = newEl("g", {
				class : "line-label-holder",
				x : x + "%"
			});
			mark.x = x;
			const lineLabel = newTextEl(mark.name,  diagramHeight + 25 );
			//lineLabel.setAttribute("writing-mode", "tb");
			lineLabel.setAttribute("x", x + "%");
			lineLabel.setAttribute("stroke", "");


			lineHolder.appendChild(newEl("line", {
				x1 : x + "%",
				y1 : 0,
				x2 : x + "%",
				y2 : diagramHeight
			}));

			if(marks[i-1] && mark.x - marks[i-1].x < 1){
				lineLabel.setAttribute("x", marks[i-1].x+1 + "%");
				mark.x = marks[i-1].x+1;
			}

			//would use polyline but can't use percentage for points
			lineHolder.appendChild(newEl("line", {
				x1 : x + "%",
				y1 : diagramHeight,
				x2 : mark.x + "%",
				y2 : diagramHeight + 23
			}));

			let isActive = false;
			const onLabelMouseEnter = (evt) => {
				if(!isActive){
					isActive = true;
					addClass(lineHolder, "active");
					//firefox has issues with this
					markHolder.parentNode.appendChild(markHolder);
				}
			};

			const onLabelMouseLeave = (evt) => {
				isActive = false;
				removeClass(lineHolder, "active");
			};

			lineLabel.addEventListener("mouseenter", onLabelMouseEnter);
			lineLabel.addEventListener("mouseleave", onLabelMouseLeave);
			lineLabelHolder.appendChild(lineLabel);

			markHolder.appendChild(newEl("title", {
				text : mark.name + " (" + Math.round(mark.startTime) + "ms)",
			}));
			markHolder.appendChild(lineHolder);
			marksHolder.appendChild(markHolder);
			markHolder.appendChild(lineLabelHolder);
		});

		return marksHolder;
	};

	timeLineHolder.appendChild(createTimeWrapper());
	timeLineHolder.appendChild(renderMarks());

	lines.forEach((block, i) => {
		timeLineHolder.appendChild(createBgRect(block));
	});

	barsToShow.forEach((block, i) => {
		const blockWidth = block.total||1;

		const y = 25 * i;
		timeLineHolder.appendChild(createRect(blockWidth, 25, block.start||0.001, y, block.cssClass, block.name + " (" + block.start + "ms - " + block.end + "ms | total: " + block.total + "ms)", block.segments));

		const blockLabel = newTextEl(block.name + " (" + Math.round(block.total) + "ms)", (y + (block.segments? 20 : 17)));

		if(((block.total||1) / unit) > 10 && getNodeTextWidth(parent_element, blockLabel) < 200){
			blockLabel.setAttribute("class", "inner-label");
			blockLabel.setAttribute("x", ((block.start||0.001) / unit) + 0.5 + "%");
			blockLabel.setAttribute("width", (blockWidth / unit) + "%");
		}else if(((block.start||0.001) / unit) + (blockWidth / unit) < 80){
			blockLabel.setAttribute("x", ((block.start||0.001) / unit) + (blockWidth / unit) + 0.5 + "%");
		}else {
			blockLabel.setAttribute("x", (block.start||0.001) / unit - 0.5 + "%");
			blockLabel.setAttribute("text-anchor", "end");
		}
		blockLabel.style.opacity = block.name.match(/js.map$/) ? "0.5" : "1";
		timeLineLabelHolder.appendChild(blockLabel);
	});

	timeLineHolder.appendChild(timeLineLabelHolder);

	if(title){
		chartHolder.appendChild(newTag("h3", {
			text : title
		}));
	}
	chartHolder.appendChild(timeLineHolder);
	return chartHolder;
};


function createLegend (className, title, dlArray) {
	const legendHolder = newTag("div", {
		class : "legend-holder"
	});

	legendHolder.appendChild(newTag("h4", {
		text : title
	}));

	const dl = newTag("dl", {
		class : "legend " + className
	});

	dlArray.forEach((definition) => {
		dl.appendChild(newTag("dt", {
			class : "colorBoxHolder",
			childElement :  newTag("span", {}, "background:"+definition[1])
		}));
		dl.appendChild(newTag("dd", {
			text : definition[0]
		}));
	});
	legendHolder.appendChild(dl);

	return legendHolder;
};

//Legend
function legend() {

	const chartHolder = newTag("section", {
		class : "resource-timing chart-holder"
	});

	chartHolder.appendChild(newTag("h3", {
		text : "Legend"
	}));

	const legendsHolder = newTag("div", {
		class : "legends-group "
	});

	legendsHolder.appendChild(createLegend("initiator-type-legend", "Block color: Initiator Type", [
		["css", "#afd899"],
		["iframe", "#85b3f2"],
		["img", "#bc9dd6"],
		["script", "#e7bd8c"],
		["link", "#89afe6"],
		["swf", "#4db3ba"],
		//["font", "#e96859"],
		["xmlhttprequest", "#e7d98c"]
	]));

	legendsHolder.appendChild(createLegend("navigation-legend", "Navigation Timing", [
		["Redirect", "#ffff60"],
		["App Cache","#1f831f"],
		["DNS Lookup", "#1f7c83"],
		["TCP","#e58226"],
		["SSL Negotiation","#c141cd"],
		["Time to First Byte", "#1fe11f"],
		["Content Download", "#1977dd"],
		["DOM Processing", "#9cc"],
		["DOM Content Loaded", "#d888df"],
		["On Load", "#c0c0ff"]
	]));

	legendsHolder.appendChild(createLegend("resource-legend", "Resource Timing", [
		["Stalled/Blocking", "#cdcdcd"],
		["Redirect", "#ffff60"],
		["App Cache","#1f831f"],
		["DNS Lookup", "#1f7c83"],
		["TCP","#e58226"],
		["SSL Negotiation","#c141cd"],
		["Initial Connection (TCP)", "#e58226"],
		["Time to First Byte", "#1fe11f"],
		["Content Download", "#1977dd"]
	]));

	chartHolder.appendChild(legendsHolder);

	return chartHolder;
};

function createTiles(parent_id, resources, marks, measures, timing, firstPaint, speedIndex) {
    var data = getData(resources, marks, measures, timing);
    [
		createTile("Requests", data.requestsOnly.length||0, 30, 100, ""),
		createTile("Domains", data.requestsByDomain.length||0, 3, 5, ""),
		createTile("Total", data.perfTiming.loadEventEnd - data.perfTiming.navigationStart, 3000, 5000, " ms"),
		createTile("Speed Index", speedIndex, 1000, 3000, ""),
	].forEach(tile => {
		document.getElementById(parent_id+"1").appendChild(tile);
	});
	[
		createTile("Time to First Byte", data.perfTiming.responseStart - data.perfTiming.navigationStart, 200, 1000, " ms"),
		createTile("Time to First Paint", firstPaint, 1000, 3000, " ms"),
		createTile("DOM Content Loading", data.perfTiming.domContentLoadedEventStart - data.perfTiming.domLoading, 1000, 3000, " ms"),
		createTile("DOM Processing", data.perfTiming.domComplete - data.perfTiming.domLoading, 2500, 4500, " ms")
	].forEach(tile => {
		document.getElementById(parent_id+"2").appendChild(tile);
	});
}

function createTile(name, number, yellow_limit, red_limit, addon){
    var color = "ok"
    if (number > yellow_limit && red_limit > number) {
        color = "warning"
    } else if (red_limit < number) {
        color = "error"
    }

    const tile = newTag("div", {
		class : "four columns"
	});

	tile.appendChild(newTag("span", {
	    class: "label normal " + color + " tile",
        text: name + ": " + number + addon
	}));
	return tile
}
        </script>
        <script>
            drawGauge({{ perf_score }}, "performance");
            drawGauge({{ priv_score }}, "privacy");
            drawGauge({{ acc_score }}, "accessibility");
            drawGauge({{ bp_score }}, "best-practices");
            var resources = {{ resource_timing | safe }};
            var marks = {{ marks | safe}};
            var measures = {{ measures | safe}};
            var timing = {{ navigation_timing | safe }};
            document.getElementById("svg_legend").appendChild(resourcesTimelineComponent("svg_legend", resources, marks, measures, timing, "frames_container"));
            document.getElementById("svg_legend").appendChild(legend());
            createTiles("tiles", resources, marks, measures, timing, {{ timing['firstPaint'] }}, {{ timing['speedIndex'] }});
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <script>
			$( document ).ready(function() {
				var list = document.getElementsByClassName("description")
				for (let item of list) { item.style.display="none" }
			});
			$('.header').click(function(){
			    $(this).find('span').text(function(_, value){return value=='-'?'+':'-'});
			    $(this).nextUntil('tr.header').slideToggle(100, function(){
			  });
			});
		</script>
    </body>
</html>