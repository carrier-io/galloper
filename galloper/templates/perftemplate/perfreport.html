<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Carrier | UI Performance Audit</title>
  <link rel="icon"
        href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAA6hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxOS0wNC0wMlQxMjowNDozMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAzLjguMTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpDb21wcmVzc2lvbj4wPC90aWZmOkNvbXByZXNzaW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4zMjwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNl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" sizes="32x32" type="image/png"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<!--  <link rel="stylesheet" href="../../static/css/perfreport_new.css"/>-->
  <style>
    *{box-sizing:border-box}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-size:100%;width:100vw}body{font-size:1em;line-height:1.6;font-weight:400;font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Helvetica,Arial,sans-serif;margin:0;color:#333;width:100vw}@media screen and (max-width:480px){body{width:100vw}}body::before{content:"";display:block;width:100vw;background-color:#3c1290;height:450px;position:absolute;z-index:0}.ok{background-color:#23ac58}.ok-text{color:#23ac58}.warning{background-color:#ffc100}.warning-text{color:#ffc100}.error{background-color:#e50a0a}.error-text{color:#e50a0a}.info{background-color:#0095d2}.info-text{color:#0095d2}h1,h2,h3,h4,h5,h6{margin:0 0 1rem;font-weight:300}h1{font-size:1.3rem;font-weight:400}h2{font-size:1.2rem;margin-top:1.3rem}h3{font-size:1.1rem;font-weight:400}h4{font-size:1rem}h5{font-size:.8rem}h6{font-size:.5rem}p{margin-top:0}a{color:#5712b0}a:hover{color:#5712b0}.content{position:relative;z-index:1;max-width:1120px;margin:0 auto}.main{background-color:#fff;border-radius:7px}@media screen and (max-width:480px){.main{width:100vw}}#header{color:#fff;padding:70px 0 20px}@media screen and (max-width:1160px){#header{padding:20px}}#header h1{margin:0 0 30px}#header h4{margin:0}#header .label{text-transform:uppercase;display:inline-block;padding:3px 6px;border-radius:5px;font-size:75%;margin-left:.3em;font-weight:400}#header .label.ok{background-color:#23ac58}#header .label.warning{background-color:#ff7e00}#header .label.error{background-color:#e50a0a}#header .label.info{background-color:#0095d2}#donuts{display:flex;padding:65px 15px 0;justify-content:space-around}@media screen and (max-width:480px){#donuts{padding:30px 0 0;flex-direction:column;justify-content:center}}#donuts .green-fill{fill:#23ac58}#donuts .green-stroke{stroke:#23ac58}#donuts .yellow-fill{fill:#ffc100}#donuts .yellow-stroke{stroke:#ffc100}#donuts .red-fill{fill:#e50a0a}#donuts .red-stroke{stroke:#e50a0a}#donuts .donut{background:#fff;justify-content:center;height:110px;width:110px;align-items:center;display:flex;flex-direction:column}@media screen and (max-width:480px){#donuts .donut{margin:0 auto}}#donuts .donut-title{display:block;text-align:center;margin:2em 0;font-size:1rem;font-weight:600;color:#333}#donuts .donut-textfield a{text-decoration:none;color:#000;font-size:.8em;font-weight:300}#donuts .donut-canvas{display:inline-block;position:relative}#tiles{display:flex;justify-content:space-evenly;font-size:1rem;margin:0 0 60px}@media screen and (max-width:480px){#tiles{flex-direction:column;justify-content:space-between;margin:0 0 2rem}}#tiles .tile-container{flex-basis:calc((100% - 315px)/ 2)}@media screen and (max-width:480px){#tiles .tile-container{margin:0 10px;flex-basis:100%}#tiles .tile-container:first-child{border-bottom:1px solid #f0f0f0}}#tiles .tile{line-height:3em;display:flex}#tiles .tile .value{margin-left:auto;font-weight:500}#tiles .tile+.tile{border-top:1px solid #f0f0f0}.chart-bar{display:flex;align-items:center;flex-wrap:nowrap}@media screen and (max-width:480px){.chart-bar{justify-content:space-between}}#services{padding:5px 10px}@media screen and (max-width:480px){#services{flex-grow:0}}#services select{font-size:.82rem;height:2rem;width:130px;border:none}@media screen and (max-width:480px){#services select{width:auto}}#frames_container{display:flex}#frames_container .divFrame{width:calc(100% / 8)}#frames_container .divFrame img{width:100%;position:relative}#frames_container .modal{position:fixed;display:flex;flex-direction:column;top:0;left:0;bottom:0;right:0;background-color:rgba(0,0,0,.5);justify-content:center;align-items:center;padding:15px;z-index:-1;opacity:0;transition:opacity .2s}#frames_container .modal.show{z-index:100;opacity:1}#frames_container .modal .close{position:absolute;display:block;background:#fff;width:50px;height:50px;top:15px;right:15px;font-size:3rem;line-height:calc(3rem - 5px);text-align:center;border-radius:50%;cursor:pointer}#frames_container .modal .close:hover{background-color:#eee}#frames_container .modal img{transform:scale(0);transition:transform .5s;max-height:0;max-width:0}#frames_container .modal.show img{transform:scale(1);max-height:90%;max-width:90%}#frames_container .modal .caption{opacity:0;transition:opacity .5s;margin-top:15px;background-color:#fff;padding:5px 15px}#frames_container .modal.show .caption{opacity:1}.chart{margin:0 0 1rem;position:relative;display:flex}@media screen and (max-width:480px){.chart{flex-direction:column}}#legend{white-space:nowrap;padding:0 1rem}@media screen and (max-width:480px){#legend{flex-grow:1}}#legend>label{padding-right:.5rem}.legends-group{position:absolute;display:none;right:0;top:100%;background-color:#fff;z-index:100;padding:1rem 30px 0}#legend-checkbox:checked+.legends-group{display:block}.legends-group h3{margin:0 0 .5rem}.legends-group h4{color:#999;font-weight:400;font-size:.9em;margin:0 0 .5rem}.legends-group dl{margin:0 0 .5rem}.legends-group dt{position:absolute;height:1rem;display:flex;align-items:center}.legends-group dt span{display:block;width:.5rem;height:.5rem}.legends-group dd{margin:0;width:100%;line-height:1rem;padding:0 0 .6rem 1rem;font-weight:300;font-size:.92em}.css{background:#afd899}.html,.iframe,.internal{background:#85b3f2}.image,.img{background:#bc9dd6}.js,.script{background:#e7bd8c}.link{background:#89afe6}.flash,.swf{background:#4db3ba}.font{background:#e96859}.ajax,.xmlhttprequest{background:#e7d98c}.other{background:#bebebe}.css-light{background:#b9cfa0}.html-light,.iframe-light,.internal-light{background:#c2d9f9}.image-light,.img-light{background:#deceeb}.js-light,.script-light{background:#f3dec6}.link-light{background:#c4d7f3}.flash-light,.swf-light{background:#a6d9dd}.font-light{background:#f4b4ac}.ajax-light,.xmlhttprequest-light{background:#f3ecc6}.other-light{background:#dfdfdf}.block-css{fill:#afd899}.block-html,.block-iframe,.block-internal{fill:#85b3f2}.block-image,.block-img{fill:#bc9dd6}.block-js,.block-script{fill:#e7bd8c}.block-link{fill:#89afe6}.block-flash,.block-swf{fill:#4db3ba}.block-font{fill:#e96859}.block-ajax,.block-xmlhttprequest{fill:#e7d98c}.block-other{fill:#bebebe}.block-total{fill:#ccc}.block-unload{fill:#909}.block-redirect{fill:#ffff60}.block-appcache{fill:#1f831f}.block-dns{fill:#1f7c83}.block-tcp{fill:#e58226}.block-ttfb{fill:#1fe11f}.block-response{fill:#1977dd}.block-dom{fill:#9cc}.block-dom-content-loaded{fill:#d888df}.block-onload{fill:#c0c0ff}.block-ssl{fill:#c141cd}.block-ms-first-paint-event{fill:#8fbc83}.block-dom-interactive-event{fill:#d888df}.block-network-server{fill:#8cd18c}.block-custom-measure{fill:red}.block-navigation-api-total{fill:#ccc}.block-blocking{fill:#cdcdcd}.block-undefined{fill:#0f0}#waterfall{margin-bottom:20px;position:relative}#waterfall-total{padding-top:5px}#waterfall>table{width:100%;font-size:12px;border-spacing:0;border-bottom:1px solid #ccc}#waterfall table th{text-align:left;background-color:#eee;white-space:nowrap}#waterfall table td,#waterfall table th{padding:5px 10px;white-space:nowrap;vertical-align:middle}#waterfall table .name{max-width:150px}#waterfall table .duration{text-align:right}#waterfall table .timeline{width:100%}#waterfall table td{text-overflow:ellipsis;overflow:hidden}#waterfall>table>tbody>tr+tr>td{border-top:1px solid #ccc}#waterfall table td+td,#waterfall table th+th{border-left:1px solid #ccc}#waterfall>table>tbody>tr:nth-child(2n)>td{background-color:rgba(0,0,0,.03)}#waterfall>table>tbody>tr:hover>td,#waterfall>table>tbody>tr:hover>th{background-color:rgba(125,180,255,.2)}#waterfall rect.active{opacity:.7}#waterfall .time-grid{width:1px;position:absolute;top:45px;bottom:0;background:rgba(0,0,0,.15);z-index:9}#waterfall .time-grid-label{position:absolute;top:2px;font-size:.76rem;font-weight:700;color:rgba(0,0,0,.45);opacity:1}#waterfall .time-grid-left{right:5px}#waterfall .time-grid-right{left:5px}#waterfall .time-grid-step{z-index:0}#waterfall .water-fall-chart{width:100%;overflow:visible;font-size:12px;line-height:1em;position:relative;z-index:1}#waterfall .info-popup{position:absolute;background:#fff;display:none;box-shadow:0 3px 10px rgba(0,0,0,.1);border-radius:5px;padding:.6rem .6rem 0;z-index:10}#waterfall tr:hover .info-popup{display:block;margin-left:50%;transform:translateX(-100%) translateY(25px)}@media screen and (max-width:480px){#waterfall tr:hover .info-popup{margin:0;left:10px;right:10px;width:calc(100vw - 20px);transform:translateY(25px)}}#waterfall .info-popup .info-title{max-width:300px;white-space:normal;word-break:break-all;font-size:.82rem;margin:0 0 .3rem;color:#33c}#waterfall .info-popup .info-subtitle{font-size:.82rem;margin:0 0 .3rem;color:#aaa}#waterfall .info-popup table{width:100%;border-spacing:0;margin:0 0 .6rem}#waterfall .info-popup table td{border:none;background:0 0;font-size:.76rem;padding:.2rem}#waterfall .info-popup table td{width:100%}#waterfall .info-popup table td:first-child,#waterfall .info-popup table td:last-child{white-space:nowrap;width:auto}#waterfall .info-popup table td:first-child{padding-left:0}#waterfall .info-popup table td:last-child{padding-right:0;text-align:right}#waterfall .info-popup table tr.total td{padding-top:.6rem;font-weight:700}.advices{background-color:#fbfbfb;padding:20px 45px;margin:0 0 15px}@media screen and (max-width:480px){.advices{padding:20px 10px 10px}}.advices h3{font-size:1rem;margin:0 0 15px}.advices .table{table-layout:fixed;position:relative}.advices .table thead th{color:#777;font-size:.85rem;font-weight:400;text-align:left}.advices .table tr+tr.header td{border-top:1px solid #f0f0f0}.advices .table td,.advices .table th{vertical-align:top;padding:15px 0;font-size:.82em}.advices .table td:nth-child(1){padding-left:30px;width:33%}.advices .table .header td:nth-child(1){font-weight:600}.advices .table .description p{margin:.5em 0}.advices .table .description p:first-child{margin-top:0}.advices .table td:nth-child(2){padding:15px}.advices .table td:nth-child(3),.advices .table th:nth-child(3){text-align:right;width:15%}.advices .header .toggle::before{position:absolute;left:0;font-size:1.1rem;content:"\203a";display:inline-block;width:15px;height:15px;text-align:center;line-height:12px;background-color:#eee;border-radius:3px;transform:rotate(90deg)}.advices .header.show .toggle::before{content:"\2039"}.advices .header+.description{display:none}.advices .header.show td{padding-bottom:0}.advices .description td{word-break:break-word;padding-left:30px}.advices .header.show+.description{display:table-row}.page-info{background-color:#fbfbfb;padding:20px 45px;margin:0 0 15px;font-size:.85rem;width:50%}@media screen and (max-width:480px){.page-info{width:100vw;padding:20px}}.page-info h3{font-size:1rem;margin:0 0 15px}.page-info table td,.page-info table th{text-align:left;vertical-align:top;padding:.5rem 5rem;font-size:.82em}@media screen and (max-width:480px){.page-info table td,.page-info table th{padding:.5rem 2rem}}.page-info table th{padding-left:0}.page-info table thead th{font-weight:400}</style>

<!--  <script type="text/javascript" src="../../static/js/perfreport.js"></script>-->
  <script type="text/javascript">
    function openFull(a){function b(a){a.stopPropagation()}function c(a){switch(a.keyCode){case 27:return void d(a);case 39:k.includes(l+1)&&l++;break;case 37:k.includes(l-1)&&l--;}f(l)}function d(){window.removeEventListener("keyup",c),m.classList.remove("show"),e()}function e(){n.src="",o.innerHTML=""}function f(a){const b=i.querySelector("#frame_"+a);n.src=b.src,o.innerHTML=b.alt}const g=a.target,h=g.classList.contains("frameImg");if(!g||!h)return;const i=document.getElementById("frames_container"),j=[...i.querySelectorAll(".frameImg")],k=j.map(a=>+a.alt.replace(/.*frame(.*?)/,"$1"));let l=j.indexOf(g);const m=i.querySelector(".modal"),n=m.querySelector(".img"),o=m.querySelector(".caption"),p=m.querySelector(".close");m.onclick=d,n.onclick=b,o.onclick=b,p.onclick=d,window.addEventListener("keydown",c),function(a){f(a),m.classList.add("show")}(l)}function drawChart(a){var b=JSON.parse(a),c=document.getElementById("timeLine"),d=new google.visualization.Timeline(c),f=new google.visualization.DataTable;f.addColumn({type:"string",id:"Term"}),f.addColumn({type:"string",id:"Phase"}),f.addColumn({type:"number",id:"Start"}),f.addColumn({type:"number",id:"End"}),f.addRows([["1","Total Time",b.navigationStart,b.loadEventEnd],["2","Network",b.navigationStart,b.fetchStart],["3","Time To First Bite",b.fetchStart,b.requestStart],["4","Request",b.requestStart,b.responseStart],["5","Response",b.responseStart,b.responseEnd],["6","Dom Processing",b.domLoading,b.domComplete],["7","Load Event",b.loadEventStart,b.loadEventEnd]]);d.draw(f,{timeline:{showRowLabels:!1},animation:{startup:!0,duration:1e3,easing:"in"},avoidOverlappingGridLines:!0,backgroundColor:"#fff",colors:["#94499C","#1072BA","#F2E208","#F08821","#65B345","#514b43"]});var g=document.getElementsByTagName("g");g[1].parentNode.removeChild(g[1])}function drawChartRes(a){var b=JSON.parse(a),c=document.getElementById("timeLine2"),d=new google.visualization.Timeline(c),f=new google.visualization.DataTable;f.addColumn({type:"string",id:"Type"}),f.addColumn({type:"string",id:"Name"}),f.addColumn({type:"number",id:"Start"}),f.addColumn({type:"number",id:"End"}),f.addRows(function(a){var b=[],c=1;for(const d of a)b.push([d.initiatorType.toString(),d.name.substring(0,40),d.startTime,d.responseEnd]),c++;return b}(b));google.visualization.events.addListener(d,"select",function(){if(selection=d.getSelection(),0<selection.length){var a=b[selection[0].row];createPopUp(a)}}),d.draw(f,{timeline:{showRowLabels:!1,colorByRowLabel:!0,groupByRowLabel:!1,showBarLabels:!0}});var g=document.getElementsByTagName("g");g[7].parentNode.removeChild(g[7])}function createPopUp(a){var b=document.getElementById("resPopUp");b.style.display="block",document.getElementById("resName").children[1].innerHTML=a.name,document.getElementById("resDomain").children[1].innerHTML=function(a){var b=/http(?:s)?:\/\/(?:[\w-]+\.)*([\w-]{1,63})(?:\.(?:\w{3}|\w{2}))(?:$|\/)/;return b.test(a)?b.exec(a)[0]:"can't extract domain"}(a.name),document.getElementById("resInitiator").children[1].innerHTML=a.initiatorType,document.getElementById("resDuration").children[1].innerHTML=Math.floor(a.duration)+" ms",document.getElementById("resSize").children[1].innerHTML=a.transferSize/1e3+" kb"}function closeResPopUp(){var a=document.getElementById("resPopUp");a.style.display="none"}function setInterval(){var a=document.getElementsByClassName("google-visualization-tooltip-action");2===a.length&&a[0].parentNode.removeChild(a[0]),a=null}function drawGauge(a,b){const c={percent:a,stroke:7,colorName:getColorName(a)};createDonut(document.getElementById(b),c)}function getColorName(a){let b="green";return 60<a&&90>a?b="yellow":60>a&&(b="red"),b}</script>
</head>
<body>
<div class="content">
  <div class="row" id="header">
    <h1>PerfUI Test for {{ page_name }} Page</h1>
    <h4>Test status
      <span class="label normal {{ test_status }}">{{ str_test_status }}</span>
    </h4>
  </div>
  <div class="main">
    <div id="donuts">
      <div class="donut-holder">
        <a href="#perf">
          <div class="donut" id="performance"></div>
          <h3 class="donut-title">Performance</h3>
        </a>
      </div>
      <div class="donut-holder">
        <a href="#priv">
          <div class="donut" id="privacy"></div>
          <h3 class="donut-title"><a href="#privacy">Privacy</a></h3>
        </a>
      </div>
      <div class="donut-holder">
        <a href="#access">
          <div class="donut" id="accessibility"></div>
          <h3 class="donut-title">Accessibility</h3>
        </a>
      </div>
      <div class="donut-holder">
        <a href="#bp">
          <div class="donut" id="best-practices"></div>
          <h3 class="donut-title">Best Practices</h3>
        </a>
      </div>
    </div>
    <div class="tile-row" id="tiles"></div>
    <div class="chart">
      <div class="chart-bar">
        <div id="services"></div>
        <div id="legend"></div>
      </div>
      <div id="frames_container">
        {% for screenshot in screenshots %}
        <div class="divFrame">
          <img class="frameImg"
               src="data:image/jpg;base64,{{ screenshot }}"
               alt="load frame {{ loop.index }}" id="frame_{{ loop.index }}"/>
        </div>
        {% endfor %}
        <div class="modal">
          <span class="close">&times;</span>
          <img class="img" src="" alt=""/>
          <div class="caption"></div>
        </div>
      </div>
    </div>
    <div id="waterfall">
      <table>
        <thead>
        <tr>
          <th class="name">Name</th>
          <th class="duration">Time (ms)</th>
          <th class="timeline">Waterfall <div id="waterfall-total"></div></th>
        </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div id="svg_legend"></div>
    <div class="advices" id="a11y_advices">
      <div>
        <a id="access"></a>
        <h3>Accessibility advice ({{ acc_score }})</h3>

        <!-- region Accessibility  -->
        {% if acc_findings %}
          <table class="table table-striped">
            <thead class="thead-dark">
            <tr>
              <th>Advice</th>
              <th></th>
              <th>Score</th>
            </tr>
            </thead>
            <tbody>

            {% for finding in acc_findings %}
            <tr class="header">
              <td><span class="toggle"></span>{{ finding['title'] }}</td>
              <td>{{ finding['advice'] | safe }}</td>
              <td>{{ finding['score'] }}</td>
            </tr>

            {% if finding['details'] %}
            <tr class="description">
              <td colspan="3">
                <p>{{ finding['description'] }}</p>
                <b>Instances:</b>
                {% for detail in finding['details'] %}
                  <p>{{ detail }}</p>
                {% endfor %}
              </td>
            </tr>
            {% endif %}
            {% endfor %}

            </tbody>
          </table>
        {% else %}
          <p>Your accessibility practices score are perfect!</p>
        {% endif %}
        <!-- endregion  -->

      </div>
    </div>
    <div class="advices" id="perf_advices">
      <div class="twelve columns">
        <a id="perf"></a>
        <h3>Performance advice ({{ perf_score }})</h3>

        <!-- region Performance  -->
        {% if perf_findings %}
        <table class="table table-striped">
          <thead class="thead-dark">
          <tr>
            <th>Advice</th>
            <th></th>
            <th>Score</th>
          </tr>
          </thead>
          <tbody>

          {% for finding in perf_findings %}
          <tr class="header">
            <td><span class="toggle"></span>{{ finding['title'] }}</td>
            <td>{{ finding['advice'] | safe }}</td>
            <td>{{ finding['score'] }}</td>
          </tr>

          {% if finding['details'] %}
          <tr class="description">
            <td colspan="3">
              <p>{{ finding['description'] }}</p>
              <b>Instances:</b>
              {% for detail in finding['details'] %}
              <p>{{ detail }}</p>
              {% endfor %}
            </td>
          </tr>
          {% endif %}
          {% endfor %}

          </tbody>
        </table>
        {% else %}
        <p>Your performance practices score are perfect!</p>
        {% endif %}
        <!-- endregion  -->

      </div>
    </div>
    <div class="advices" id="practice_advices">
      <div class="twelve columns">
        <a id="bp"></a>
        <h3>Best practice advice ({{ bp_score }})</h3>

        <!-- region Best practice  -->
        {% if bp_findings %}
        <table class="table table-striped">
          <thead class="thead-dark">
          <tr>
            <th>Advice</th>
            <th></th>
            <th>Score</th>
          </tr>
          </thead>
          <tbody>

          {% for finding in bp_findings %}
          <tr class="header">
            <td><span class="toggle"></span>{{ finding['title'] }}</td>
            <td>{{ finding['advice'] | safe }}</td>
            <td>{{ finding['score'] }}</td>
          </tr>

          {% if finding['details'] %}
          <tr class="description">
            <td colspan="3">
              <p>{{ finding['description'] }}</p>
              <b>Instances:</b>
              {% for detail in finding['details'] %}
              <p>{{ detail }}</p>
              {% endfor %}
            </td>
          </tr>
          {% endif %}
          {% endfor %}

          </tbody>
        </table>
        {% else %}
        <p>Your best practices score are perfect!</p>
        {% endif %}
        <!-- endregion  -->

      </div>
    </div>
    <div class="advices" id="privacy_advices">
      <div class="twelve columns">
        <a id="priv"></a>
        <h3>Privacy advice ({{ priv_score }})</h3>

        <!-- region Privacy  -->
        {% if priv_findings %}
        <table class="table table-striped">
          <thead class="thead-dark">
          <tr>
            <th>Advice</th>
            <th></th>
            <th>Score</th>
          </tr>
          </thead>
          <tbody>

          {% for finding in priv_findings %}
          <tr class="header">
            <td><span class="toggle"></span>{{ finding['title'] }}</td>
            <td>{{ finding['advice'] | safe }}</td>
            <td>{{ finding['score'] }}</td>
          </tr>

          {% if finding['details'] %}
          <tr class="description">
            <td colspan="3">
              <p>{{ finding['description'] }}</p>
              <b>Instances:</b>
              {% for detail in finding['details'] %}
              <p>{{ detail }}</p>
              {% endfor %}
            </td>
          </tr>
          {% endif %}
          {% endfor %}

          </tbody>
        </table>
        {% else %}
        <p>Your Privacy related practices score are perfect!</p>
        {% endif %}
        <!-- endregion  -->

      </div>
    </div>
    <a id="info"></a>
    <div class="page-info">
      <h3>Page info</h3>
      <div class="one-half">
        <table>
          <thead>
          <tr>
            <th colspan="2">{{ page_name }}</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>Browser</td>
            <td class="number">{{ info['browser'] }}</td>
          </tr>
          <tr>
            <td>windowSize</td>
            <td class="number">{{ info['windowSize'] }}</td>
          </tr>
          <tr>
            <td>Width</td>
            <td class="number">{{ info['documentWidth'] }}</td>
          </tr>
          <tr>
            <td>Height</td>
            <td class="number">{{ info['documentHeight'] }}</td>
          </tr>
          <tr>
            <td>DOM elements</td>
            <td class="number">{{ info['domElements'] }}</td>
          </tr>
          <tr>
            <td>Avg DOM depth</td>
            <td class="number">{{ info['domDepth']['avg'] }}</td>
          </tr>
          <tr>
            <td>Max DOM depth</td>
            <td class="number">{{ info['domDepth']['max'] }}</td>
          </tr>
          <tr>
            <td>Iframes</td>
            <td class="number">{{ info['iframes'] }}</td>
          </tr>
          <tr>
            <td>Script tags</td>
            <td class="number">{{ info['scripts'] }}</td>
          </tr>
          <tr>
            <td>Local storage</td>
            <td class="number">{{ info['storageSize'] }} bytes</td>
          </tr>
          <tr>
            <td>Session storage</td>
            <td class="number">{{ info['sessionStorageSize'] }} bytes</td>
          </tr>
          <tr>
            <td>HTML vs AMP</td>
            <td class="number">{% if amp %} AMP {% else %} HTML {% endif %}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!--<script type="text/javascript" src="../../static/js/donut.min.js"></script>-->
<script type="text/javascript">
  "use strict";!function(){function N(e,t){for(var a=document.createElementNS("http://www.w3.org/2000/svg",e),r=Object.keys(t),s=0,n=r.length;s<n;s++)a.setAttribute(r[s],t[r[s]]);return a}window.createDonut=function(e,t){var a=parseInt(1e7*Math.random()),r=t.percent,s=void 0===r?0:r,n=t.stroke,i=void 0===n?5:n,o=t.colorName,d=void 0===o?"green":o,c=e.clientWidth,l=e.clientHeight,h=Math.min(c,l)/2,p=h-i/2,v=h,m=h,y=parseInt(h*Math.PI*2),x=s*y/100;if(window.CSS&&CSS.supports("color","var(--fake-var)")){var f=e.style;f.setProperty("--end-dash",x),f.setProperty("--max-dash",y)}var u=N("svg",{class:"svg-container"+a,viewBox:"0 0 "+2*h+" "+2*h,width:2*h+"px",height:2*h+"px"}),k=N("circle",{class:d+"-stroke circle"+a,cx:v,cy:m,r:p,fill:"none",stroke:"none","stroke-width":i,"stroke-linecap":"round","stroke-dasharray":x+" "+y,transform:"translate(0,"+2*h+") rotate(-90)"}),g=N("circle",{class:d+"-fill circle"+a,cx:v,cy:m,r:h,stroke:"none",opacity:.1}),w=N("text",{style:"font-family:sans-serif;font-size: "+h/2+"px;",class:d+"-fill",x:v,y:m,fill:"none","dominant-baseline":"middle","text-anchor":"middle"}),C=document.createTextNode(s);w.appendChild(C);var b=document.createElement("style");b.innerText="@supports (--css: variables) {.circle"+a+" {animation: circle 2s;stroke-dasharray: var(--end-dash) var(--max-dash);} @keyframes circle {0% {stroke-dasharray: 0 var(--max-dash);} 75% {stroke-dasharray: var(--end-dash) var(--max-dash);} 100% {stroke-dasharray: var(--end-dash) var(--max-dash);}}}",u.appendChild(g),u.appendChild(k),u.appendChild(w),e.appendChild(u),e.appendChild(b);var S=Number(w.getAttribute("y"))+w.getBBox().height/15;w.setAttribute("y",S)}}();</script>

<!--<script type="text/javascript" src="../../static/js/bookmarklet/resource_timeline.js"></script>-->
<script type="text/javascript">
  function toggleClass(a,b){return a.classList?a.classList.toggle(b):-1===a.getAttribute("class").indexOf(b)?addClass(a,b):removeClass(a,b),a}function addClass(a,b){return a.classList?a.classList.add(b):a.setAttribute("class",a.getAttribute("class")+" "+b),a}function removeClass(a,b){return a.classList?a.classList.remove(b):a.setAttribute("class",a.getAttribute("class").replace(new RegExp("(\\s|^)"+b+"(\\s|$)","g"),"$2")),a}function newSvgEl(a,b,c,d){const e=document.createElementNS("http://www.w3.org/2000/svg",a);for(let f in b=b||{},b)b.hasOwnProperty(f)&&"text"!==f&&e.setAttributeNS(null,f,b[f]);return e.textContent=b.text||"",e.style.cssText=c||"",d&&e.appendChild(d),e}function newEl(a,b,c){const d=document.createElement(a);return b&&("string"==typeof b?d.classList.add(b):d.classList.add(...b)),c&&("string"==typeof c||"number"==typeof c?d.innerHTML=c:d.appendChild(c)),d}function newTextEl(a,b,c){return newSvgEl("text",{fill:"#111",y:b,text:a},(c||"")+" text-shadow:0 0 4px #fff;")}function getNodeTextWidth(a,b){const c=newSvgEl("svg:svg",{},"visibility:hidden;");c.appendChild(b),document.getElementById(a).appendChild(c);const d=b.getBBox().width;return c.parentNode.removeChild(c),d}function endsWith(a,b){return-1!==a.indexOf(b,a.length-b.length)}function getFileType(a,b){if(a)switch(a){case"jpg":case"jpeg":case"png":case"gif":case"webp":case"svg":case"ico":return"image";case"js":return"js";case"css":return"css";case"html":return"html";case"woff":case"woff2":case"ttf":case"eot":case"otf":return"font";case"swf":return"flash";case"map":return"source-map";}return b?"xmlhttprequest"===b?"ajax":"img"===b?"image":"script"===b?"js":"internal"===b||"iframe"===b?"html":"other":b}function getItemCount(a,b){let c,d={},e=[];for(let f in a.forEach(a=>{d[a]=d[a]?d[a]+1:1}),d)c={},c[b||"key"]=f,c.count=d[f],e.push(c);return e.sort((c,a)=>c.count<a.count?1:-1)}function getData(a,b,c,d){const e={resources:a,marks:b,measures:c,perfTiming:d,allResourcesCalc:[],isValid:()=>isValid};e.allResourcesCalc=e.resources.filter(a=>!a.name.match(/http[s]?:\/\/(micmro|nurun).github.io\/performance-bookmarklet\/.*/)).map(a=>{const b=0===a.name.indexOf("http");let c,d,e;b?(c=a.name.match(/:\/\/(.[^/]+)([^?]*)\??(.*)/),d=c[2].split("/").pop(),e=d.substr((Math.max(0,d.lastIndexOf("."))||1/0)+1)):(c=["",location.host],e=a.name.split(":")[0]);const f={name:a.name,domain:c[1],initiatorType:a.initiatorType||e||"SourceMap or Not Defined",fileExtension:e||"XHR or Not Defined",loadtime:a.duration,fileType:getFileType(e,a.initiatorType),isRequestToHost:c[1]===location.host};for(let b in a)a.hasOwnProperty(b)&&"function"!=typeof a[b]&&(f[b]=a[b]);return a.requestStart&&(f.requestStartDelay=a.requestStart-a.startTime,f.dns=a.domainLookupEnd-a.domainLookupStart,f.tcp=a.connectEnd-a.connectStart,f.ttfb=a.responseStart-a.startTime,f.requestDuration=a.responseStart-a.requestStart),a.secureConnectionStart&&(f.ssl=a.connectEnd-a.secureConnectionStart),f}),e.requestsOnly=e.allResourcesCalc.filter(a=>0===a.name.indexOf("http")&&!a.name.match(/js.map$/)),e.initiatorTypeCounts=getItemCount(e.requestsOnly.map(a=>a.initiatorType||a.fileExtension),"initiatorType"),e.initiatorTypeCountHostExt=getItemCount(e.requestsOnly.map(a=>(a.initiatorType||a.fileExtension)+" "+(a.isRequestToHost?"(host)":"(external)")),"initiatorType"),e.requestsByDomain=getItemCount(e.requestsOnly.map(a=>a.domain),"domain"),e.fileTypeCountHostExt=getItemCount(e.requestsOnly.map(a=>a.fileType+" "+(a.isRequestToHost?"(host)":"(external)")),"fileType"),e.fileTypeCounts=getItemCount(e.requestsOnly.map(a=>a.fileType),"fileType");const f={};return e.requestsOnly.forEach(b=>{const c=e.requestsByDomain.filter(c=>c.domain===b.domain)[0]||{},d=f[b.domain]||0;b.duration=c.duration||b.responseEnd-b.startTime,d<=b.startTime?c.durationTotalParallel=(c.durationTotalParallel||0)+b.duration:d<b.responseEnd&&(c.durationTotalParallel=(c.durationTotalParallel||0)+(b.responseEnd-d)),f[b.domain]=b.responseEnd||0,c.durationTotal=(c.durationTotal||0)+b.duration}),e.hostRequests=e.requestsOnly.filter(a=>a.domain===location.host).length,e.currAndSubdomainRequests=e.requestsOnly.filter(a=>a.domain.split(".").slice(-2).join(".")===location.host.split(".").slice(-2).join(".")).length,e.crossDocDomainRequests=e.requestsOnly.filter(a=>!endsWith(a.domain,document.domain)).length,e.hostSubdomains=e.requestsByDomain.filter(a=>endsWith(a.domain,location.host.split(".").slice(-2).join("."))&&a.domain!==location.host).length,e.slowestCalls=[],e.average=void 0,0<e.allResourcesCalc.length&&(e.slowestCalls=e.allResourcesCalc.filter(b=>b.name!==location.href).sort((c,a)=>a.duration-c.duration),e.average=Math.floor(e.slowestCalls.reduceRight((c,a)=>"number"==typeof c?c+a.duration:c.duration+a.duration)/e.slowestCalls.length)),e}function newTag(a,b,c){b=b||{};const d=document.createElement(a);for(let e in b)"text"!=e&&b.hasOwnProperty(e)&&(d[e]=b[e]);return b.text?d.textContent=b.text:b.childElement&&("object"==typeof b.childElement?b.childElement instanceof NodeList?Array.prototype.slice.call(b.childElement,0).forEach(a=>{d.appendChild(a)}):d.appendChild(b.childElement):d.appendChild(newTextNode(b.childElement))),b.class&&(d.className=b.class),d.style.cssText=c||"",d}function getChartData(a,b){const c={pageLoadTime:a.perfTiming.loadEventEnd-a.perfTiming.responseStart,lastResponseEnd:a.perfTiming.loadEventEnd-a.perfTiming.responseStart,blocks:[],total:{}};Object.keys(a.perfTiming).forEach(b=>{a.perfTiming[b]&&"number"==typeof a.perfTiming[b]&&(c[b]=a.perfTiming[b]-a.perfTiming.navigationStart)});const d=timeBlock("domContentLoaded Event",c.domContentLoadedEventStart,c.domContentLoadedEventEnd,"block-dom-content-loaded"),e=timeBlock("Onload Event",c.loadEventStart,c.loadEventEnd,"block-onload"),f=[timeBlock("Unload",c.unloadEventStart,c.unloadEventEnd,"block-unload"),timeBlock("Redirect",c.redirectStart,c.redirectEnd,"block-redirect"),timeBlock("App cache",c.fetchStart,c.domainLookupStart,"block-appcache"),timeBlock("DNS",c.domainLookupStart,c.domainLookupEnd,"block-dns"),timeBlock("TCP",c.connectStart,c.connectEnd,"block-tcp"),timeBlock("Timer to First Byte",c.requestStart,c.responseStart,"block-ttfb"),timeBlock("Response",c.responseStart,c.responseEnd,"block-response"),timeBlock("DOM Processing",c.domLoading,c.domComplete,"block-dom"),d,e];return c.secureConnectionStart&&f.push(timeBlock("SSL",c.connectStart,c.secureConnectionStart,"block-ssl")),c.msFirstPaint&&f.push(timeBlock("msFirstPaint Event",c.msFirstPaint,c.msFirstPaint,"block-ms-first-paint-event")),c.domInteractive&&f.push(timeBlock("domInteractive Event",c.domInteractive,c.domInteractive,"block-dom-interactive-event")),c.redirectEnd||c.redirectStart||!(c.fetchStart>c.navigationStart)||f.push(timeBlock("Cross-Domain Redirect",c.navigationStart,c.fetchStart,"block-redirect")),c.total=timeBlock("Navigation API total",0,c.loadEventEnd,"block-navigation-api-total",f),a.allResourcesCalc.filter(a=>a.startTime<c.loadEventEnd+15e3).filter(b||(()=>!0)).forEach(a=>{const b=[timeBlock("Redirect",a.redirectStart,a.redirectEnd,"block-redirect"),timeBlock("DNS Lookup",a.domainLookupStart,a.domainLookupEnd,"block-dns"),timeBlock("Initial Connection (TCP)",a.connectStart,a.connectEnd,"block-dns"),timeBlock("secureConnect",a.secureConnectionStart||void 0,a.connectEnd,"block-ssl"),timeBlock("Timer to First Byte",a.requestStart,a.responseStart,"block-ttfb"),timeBlock("Content Download",a.responseStart||void 0,a.responseEnd,"block-response")],d=[0,a.redirectStart,a.domainLookupStart,a.connectStart,a.secureConnectionStart,a.requestStart,a.responseStart],e=d.reduce((b,c)=>0<c&&(c<b||0>=b)&&c!==a.startTime?c:b);a.startTime<e&&b.unshift(timeBlock("Stalled/Blocking",a.startTime,e,"block-blocking")),c.blocks.push(timeBlock(a.name,a.startTime,a.responseEnd,"block-"+a.initiatorType,b,a)),c.lastResponseEnd=Math.max(c.lastResponseEnd||1,a.responseEnd)}),{loadDuration:Math.round(Math.max(c.lastResponseEnd,a.perfTiming.loadEventEnd-a.perfTiming.navigationStart)),blocks:c.blocks,total:c.total,bg:[d,e]}}function resourcesTimelineComponent(a,b,c,d,e,f){const g=getData(c,d,e,f),h=getChartData(g,""),i=setupTimeLine(a,h.loadDuration,h.blocks,g.marks,h.bg),j=15,k=document.getElementById("waterfall-total"),l=getTimeline(h.total,h.loadDuration/100,j);if(k.appendChild(getInfoPopup(h.total,j)),k.appendChild(l),addTimeSteps(k,h.loadDuration),window.addEventListener("resize",()=>{removeTimeSteps(k),addTimeSteps(k,h.loadDuration)},{passive:!0}),1<g.requestsByDomain.length){const c=newTag("select",{class:"domain-selector",onchange:b=>{domainSelect(b,i,a,h,g)}});c.appendChild(newTag("option",{text:"All",value:"all"})),g.requestsByDomain.forEach(a=>{c.appendChild(newTag("option",{text:a.domain}))}),document.getElementById(b).appendChild(c)}return i}function addTimeSteps(a,b){const c=Math.floor(b/1e3),d=a.offsetWidth/b;for(let e=0;e<=c;e++)addTimeGrid(a,`${1e3*(d*e)}px`,"time-grid-step",`${e} sec`)}function removeTimeSteps(a){const b=a.querySelectorAll(".time-grid-step");b.forEach(b=>a.removeChild(b))}function domainSelect(a,b,c,d,e){const f=a.target.value;d="all"===f?getChartData(e,""):getChartData(e,a=>a.domain===f),b.replaceWith(setupTimeLine(c,d.loadDuration,d.blocks,e.marks,d.bg))}function timeBlock(a,b,c,d,e,f){return{name:a,start:b,end:c,total:"number"!=typeof b||"number"!=typeof c?void 0:c-b,cssClass:d,segments:e,rawResource:f}}function setupTimeLine(a,b,c,d,e){function f(a){const b=newSvgEl("rect",{width:(a.total||1)/h+"%",height:k,x:(a.start||.001)/h+"%",y:0,class:a.cssClass||"block-undefined"});return b.appendChild(newSvgEl("title",{text:a.name})),b}const g=15,h=b/100,i=c.filter(a=>"number"==typeof a.start&&"number"==typeof a.total).sort((c,a)=>(c.start||0)-(a.start||0)),j=0<d.length?d.reduce((b,c)=>Math.max("number"==typeof b?b:0,getNodeTextWidth(a,newTextEl(c.name,"0")))):0,k=15*(i.length+1),l=newTag("section",{class:"resource-timing water-fall-holder chart-holder"}),m=newSvgEl("svg:svg",{height:Math.floor(k+j+35),class:"water-fall-chart"});m.appendChild(function(){const a=newSvgEl("g",{class:"time-scale full-width"});for(let c=0,d=b/1e3,e=100/d;c<=d;c++){const b=newTextEl(c+"sec",k);c>d-.2?(b.setAttribute("x",e*c-.5+"%"),b.setAttribute("text-anchor","end")):b.setAttribute("x",e*c+.5+"%");const f=newSvgEl("line",{x1:e*c+"%",y1:"0",x2:e*c+"%",y2:k});a.appendChild(f),a.appendChild(b)}return a}()),m.appendChild(function(){const a=newSvgEl("g",{transform:"scale(1, 1)",class:"marker-holder"});return d.forEach((b,c)=>{const e=b.startTime/h,f=newSvgEl("g",{class:"mark-holder"}),g=newSvgEl("g",{class:"line-holder"}),i=newSvgEl("g",{class:"line-label-holder",x:e+"%"});b.x=e;const j=newTextEl(b.name,k+25);j.setAttribute("x",e+"%"),j.setAttribute("stroke",""),g.appendChild(newSvgEl("line",{x1:e+"%",y1:0,x2:e+"%",y2:k})),d[c-1]&&1>b.x-d[c-1].x&&(j.setAttribute("x",d[c-1].x+1+"%"),b.x=d[c-1].x+1),g.appendChild(newSvgEl("line",{x1:e+"%",y1:k,x2:b.x+"%",y2:k+23}));let l=!1;const m=()=>{l||(l=!0,addClass(g,"active"),f.parentNode.appendChild(f))};j.addEventListener("mouseenter",m),j.addEventListener("mouseleave",()=>{l=!1,removeClass(g,"active")}),i.appendChild(j),f.appendChild(newSvgEl("title",{text:b.name+" ("+Math.round(b.startTime)+"ms)"})),f.appendChild(g),a.appendChild(f),f.appendChild(i)}),a}()),e.forEach(a=>m.appendChild(f(a)));const n=document.getElementById("waterfall"),o=n.querySelector("tbody");return o.innerHTML="",i.forEach(a=>{const b=newEl("tr"),c=getTimeline(a,h,g),d=newEl("td","timeline");d.appendChild(getInfoPopup(a,g));const e=newEl("div","svgWrapper");e.appendChild(c),d.appendChild(e);const f=newEl("td","name"),i=a.name.trim().split("?").shift().split("/").pop();f.innerText=i||a.name,f.setAttribute("title",a.name);const j=newEl("td","duration");j.innerText=Math.round(a.total),b.appendChild(f),b.appendChild(j),b.appendChild(d),o.append(b)}),l}function getInfoPopup(a,b){function c(a,b,c,d){const e=newEl("tr",d),f=newEl("td","",a);if(e.appendChild(f),c){const a=newEl("td","",c);e.appendChild(a)}const g=newEl("td","",`${(+b).toFixed()} ms`);return e.appendChild(g),e}const d=newEl("div","info-popup");return d.appendChild(function(a){const d=document.createDocumentFragment(),{segments:e,...f}=a,g=f.total/100;d.appendChild(newEl("h3","info-title",a.name));const h=newEl("table","info-table"),i=c("Started",f.start),j=c("Ended",f.end);h.appendChild(i),h.appendChild(j),d.appendChild(h);const k=e.reduce((d,e)=>{if(e.total){const f=getTimeline(e,g,b,a.start);d.appendChild(c(e.name,e.total,f))}return d},document.createDocumentFragment()),l=getTimeline(f,g,b,a.start),m=c("Navigation API total",f.total,l,"total");return k.appendChild(m),0<k.childNodes.length&&(d.appendChild(newEl("h4","info-subtitle","Navigation timing")),d.appendChild(newEl("table","info-table",k))),d}(a)),d}function getTimeline(a,b,c,d){const{segments:e,total:f,start:g,end:h,cssClass:i,name:j}=a,k=d&&g?g-d:g||.001,l=createRect(f||1,c,k,0,b,i,j+" ("+g+"ms - "+h+"ms | total: "+f+"ms)",e);return newSvgEl("svg:svg",{width:f,class:"water-fall-chart",height:c},"",l)}function createRect(a,b,c,d,e,f,g,h){const i=newSvgEl("g");let j;const k=newSvgEl("rect",{width:a/e+"%",height:b-1,x:Math.round(100*(c/e))/100+"%",y:d,class:(h&&0<h.length?"time-block":"segment")+" "+(f||"block-undefined")});return g&&k.appendChild(newSvgEl("title",{text:g})),k.addEventListener("mouseenter",function(a){const b=a.target,c=b.closest(".svgWrapper");c&&(addTimeGrid(c,b.x.baseVal.value+"px","start"),addTimeGrid(c,b.x.baseVal.value+b.width.baseVal.value-1+"px","end")),addClass(b,"active")}),k.addEventListener("mouseleave",function(a){const b=a.target,c=b.closest(".svgWrapper");c&&(removeTimeGrid(c,"start"),removeTimeGrid(c,"end")),removeClass(a.target,"active")}),h&&0<h.length?(j=newSvgEl("g"),j.appendChild(k),h.forEach(a=>{0<a.total&&"number"==typeof a.start&&j.appendChild(createRect(a.total,8,a.start||.001,d,e,a.cssClass,a.name+" ("+Math.round(a.start)+"ms - "+Math.round(a.end)+"ms | total: "+Math.round(a.total)+"ms)"))}),i.appendChild(j)):i.appendChild(k),i}function addTimeGrid(a,b,c,d,e){const f=newEl("div",[c,"time-grid"]);if(f.style.transform="translateX("+b+")",d){const a=e?`time-grid-${e}`:`time-grid-right`;f.appendChild(newEl("div",[a,"time-grid-label"],d))}a.appendChild(f)}function removeTimeGrid(a,b){const c=a.getElementsByClassName(b);c.length&&a.removeChild(c[0])}function createLegend(a,b,c){const d=newTag("div",{class:"legend-holder"});d.appendChild(newTag("h4",{text:b}));const e=newTag("dl",{class:"legend "+a});return c.forEach(a=>{e.appendChild(newTag("dt",{class:"colorBoxHolder",childElement:newTag("span",{},"background:"+a[1])})),e.appendChild(newTag("dd",{text:a[0]}))}),d.appendChild(e),d}function legend(){const a=document.createDocumentFragment(),b=newTag("label",{text:"Legend",id:"legend-label",htmlFor:"legend-checkbox"}),c=newTag("input",{type:"checkbox",id:"legend-checkbox"});a.appendChild(b),a.appendChild(c);const d=newTag("div",{class:"legends-group"}),e=newTag("h3",{text:"Legend"});return d.appendChild(e),d.appendChild(createLegend("initiator-type-legend","Block color: Initiator Type",[["css","#afd899"],["iframe","#85b3f2"],["img","#bc9dd6"],["script","#e7bd8c"],["link","#89afe6"],["swf","#4db3ba"],["xmlhttprequest","#e7d98c"]])),d.appendChild(createLegend("navigation-legend","Navigation Timing",[["Redirect","#ffff60"],["App Cache","#1f831f"],["DNS Lookup","#1f7c83"],["TCP","#e58226"],["SSL Negotiation","#c141cd"],["Time to First Byte","#1fe11f"],["Content Download","#1977dd"],["DOM Processing","#9cc"],["DOM Content Loaded","#d888df"],["On Load","#c0c0ff"]])),d.appendChild(createLegend("resource-legend","Resource Timing",[["Stalled/Blocking","#cdcdcd"],["Redirect","#ffff60"],["App Cache","#1f831f"],["DNS Lookup","#1f7c83"],["TCP","#e58226"],["SSL Negotiation","#c141cd"],["Initial Connection (TCP)","#e58226"],["Time to First Byte","#1fe11f"],["Content Download","#1977dd"]])),a.appendChild(d),a}function createTiles(a,b,c,d,e,f,g){const h=getData(b,c,d,e),i=document.getElementById(a),j=newTag("div",{class:"tile-container"});[createTile("Requests",h.requestsOnly.length||0,30,100,""),createTile("Domains",h.requestsByDomain.length||0,3,5,""),createTile("Total",h.perfTiming.loadEventEnd-h.perfTiming.navigationStart,3e3,5e3,"ms"),createTile("Speed Index",g,1e3,3e3,"")].forEach(a=>{j.appendChild(a)});const k=newTag("div",{class:"tile-container"});[createTile("Time to First Byte",h.perfTiming.responseStart-h.perfTiming.navigationStart,200,1e3,"ms"),createTile("Time to First Paint",f,1e3,3e3," ms"),createTile("DOM Content Loading",h.perfTiming.domContentLoadedEventStart-h.perfTiming.domLoading,1e3,3e3,"ms"),createTile("DOM Processing",h.perfTiming.domComplete-h.perfTiming.domLoading,2500,4500,"ms")].forEach(a=>{k.appendChild(a)}),i.appendChild(j),i.appendChild(k)}function createTile(a,b,c,d,e){let f="ok";b>c&&d>b?f="warning":d<b&&(f="error");const g=newTag("div",{class:"tile"});return g.appendChild(newTag("span",{class:"title",text:a})),g.appendChild(newTag("span",{class:"value "+f+"-text",text:b+" "+e})),g}
</script>

<!--<script type="text/javascript" src="../../static/js/data.js"></script>-->
<script type="text/javascript">
    drawGauge({{ perf_score }}, "performance");
    drawGauge({{ priv_score }}, "privacy");
    drawGauge({{ acc_score }}, "accessibility");
    drawGauge({{ bp_score }}, "best-practices");
    var resources = {{ resource_timing | safe }};
    var marks = {{ marks | safe}};
    var measures = {{ measures | safe}};
    var timing = {{ navigation_timing | safe }};
    document.getElementById("svg_legend").appendChild(resourcesTimelineComponent("svg_legend", 'services', resources, marks, measures, timing, "frames_container"));
    document.getElementById("svg_legend").appendChild(legend());
    createTiles("tiles", resources, marks, measures, timing, {{ timing['firstPaint'] }}, {{ timing['speedIndex'] }});
</script>

<!--<script type="text/javascript" src="../../static/js/init.js"></script>-->
<script type="text/javascript">
  (function(){function a(a,b,c){a.removeEventListener(b,c.bind(a)),a.addEventListener(b,c.bind(a))}let b=document.querySelectorAll(".advices tr"),c=Array.prototype.slice.call(b);c.forEach(b=>a(b,"click",a=>{let b=a.currentTarget;const c=b.classList.contains("header")&&b.getElementsByClassName("toggle").length;c&&b.classList.toggle("show")}));const d=document.getElementById("frames_container");a(d,"click",openFull)})();</script>
</body>
</html>
